---
# Source: neutree/charts/grafana/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
automountServiceAccountToken: false
metadata:
  labels:
    helm.sh/chart: grafana-8.11.0
    app.kubernetes.io/name: grafana
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "11.5.3"
  name: neutree-test-grafana
  namespace: neutree-test
---
# Source: neutree/charts/victoria-metrics-cluster/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels: 
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: victoria-metrics-cluster-0.20.1
  name: neutree-test-victoria-metrics-cluster
  namespace: neutree-test
---
# Source: neutree/templates/neutree-rbac.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: neutree-test-sa
---
# Source: neutree/charts/grafana/templates/secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: neutree-test-grafana
  namespace: neutree-test
  labels:
    helm.sh/chart: grafana-8.11.0
    app.kubernetes.io/name: grafana
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "11.5.3"
type: Opaque
data:
  
  admin-user: "YWRtaW4="
  admin-password: "YWRtaW4="
  ldap-toml: ""
---
# Source: neutree/charts/grafana/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: neutree-test-grafana
  namespace: neutree-test
  labels:
    helm.sh/chart: grafana-8.11.0
    app.kubernetes.io/name: grafana
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "11.5.3"
data:
  
  grafana.ini: |
    [analytics]
    check_for_plugin_updates = false
    check_for_updates = false
    enabled = false
    reporting_enabled = false
    [auth.anonymous]
    enabled = true
    [dashboards]
    default_home_dashboard_path = /var/lib/grafana/dashboards/default_grafana_dashboard.json
    [grafana_net]
    url = 
    [log]
    mode = console
    [paths]
    data = /var/lib/grafana/
    logs = /var/log/grafana
    plugins = /var/lib/grafana/plugins
    provisioning = /etc/grafana/provisioning
    [plugins]
    public_key_retrieval_disabled = true
    [security]
    allow_embedding = true
    preinstall_disabled = true
    [server]
    domain = ''
  dashboardproviders.yaml: |
    - folder: ""
      name: neutree
      options:
        path: /var/lib/grafana/dashboards
      orgId: 1
      type: file
---
# Source: neutree/templates/grafana-dashboard-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboards
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
data:
  data_grafana_dashboard.json: |-
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": "-- Grafana --",
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "type": "dashboard"
          }
        ]
      },
      "editable": true,
      "gnetId": null,
      "graphTooltip": 1,
      "iteration": 1667344411089,
      "links": [],
      "panels": [
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Amount spilled by dataset operators. DataContext.enable_get_object_locations_for_metrics must be set to True to report this metric",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 0
          },
          "hiddenSeries": false,
          "id": 1,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_spilled_bytes{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Bytes Spilled: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Bytes Spilled",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "bytes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Amount allocated by dataset operators.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 0
          },
          "hiddenSeries": false,
          "id": 2,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_allocated_bytes{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Bytes Allocated: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Bytes Allocated",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "bytes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Amount freed by dataset operators.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 1
          },
          "hiddenSeries": false,
          "id": 3,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_freed_bytes{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Bytes Freed: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Bytes Freed",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "bytes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Amount of memory store used by dataset operators.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 1
          },
          "hiddenSeries": false,
          "id": 4,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_current_bytes{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Current Usage: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Object Store Memory",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "bytes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Logical CPUs allocated to dataset operators.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 2
          },
          "hiddenSeries": false,
          "id": 5,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_cpu_usage_cores{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "CPU Usage: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "CPUs (logical slots)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "cores",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Logical GPUs allocated to dataset operators.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 2
          },
          "hiddenSeries": false,
          "id": 6,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_gpu_usage_cores{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "GPU Usage: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "GPUs (logical slots)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "cores",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Bytes output per second by dataset operators.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 3
          },
          "hiddenSeries": false,
          "id": 7,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_data_output_bytes{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[1m])) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Bytes Output / Second: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Bytes Output / Second",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "Bps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Total rows output per second by dataset operators.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 3
          },
          "hiddenSeries": false,
          "id": 11,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_data_output_rows{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[1m])) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Rows Output / Second: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Rows Output / Second",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "rows/sec",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of input blocks received by operator per second.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 4
          },
          "hiddenSeries": false,
          "id": 17,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_data_num_inputs_received{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[1m])) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Blocks Received / Second: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Input Blocks Received by Operator / Second",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "blocks/sec",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Byte size of input blocks received by operator per second.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 4
          },
          "hiddenSeries": false,
          "id": 18,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_data_bytes_inputs_received{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[1m])) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Bytes Received / Second: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Input Bytes Received by Operator / Second",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "Bps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of input blocks that operator's tasks have finished processing per second.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 5
          },
          "hiddenSeries": false,
          "id": 19,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_data_num_task_inputs_processed{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[1m])) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Blocks Processed / Second: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Input Blocks Processed by Tasks / Second",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "blocks/sec",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Byte size of input blocks that operator's tasks have finished processing per second.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 5
          },
          "hiddenSeries": false,
          "id": 20,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_data_bytes_task_inputs_processed{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[1m])) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Bytes Processed / Second: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Input Bytes Processed by Tasks / Second",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "Bps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Byte size of input blocks passed to submitted tasks per second.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 6
          },
          "hiddenSeries": false,
          "id": 21,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_data_bytes_inputs_of_submitted_tasks{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[1m])) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Bytes Submitted / Second: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Input Bytes Submitted to Tasks / Second",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "Bps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of output blocks generated by tasks per second.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 6
          },
          "hiddenSeries": false,
          "id": 22,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_data_num_task_outputs_generated{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[1m])) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Blocks Generated / Second: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Blocks Generated by Tasks / Second",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "blocks/sec",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Byte size of output blocks generated by tasks per second.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 7
          },
          "hiddenSeries": false,
          "id": 23,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_data_bytes_task_outputs_generated{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[1m])) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Bytes Generated / Second: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Bytes Generated by Tasks / Second",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "Bps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of rows in generated output blocks from finished tasks per second.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 7
          },
          "hiddenSeries": false,
          "id": 24,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_data_rows_task_outputs_generated{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[1m])) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Rows Generated / Second: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Rows Generated by Tasks / Second",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "rows/sec",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of output blocks taken by downstream operators per second.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 8
          },
          "hiddenSeries": false,
          "id": 25,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_data_num_outputs_taken{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[1m])) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Blocks Taken / Second: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Output Blocks Taken by Downstream Operators / Second",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "blocks/sec",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Byte size of output blocks taken by downstream operators per second.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 8
          },
          "hiddenSeries": false,
          "id": 26,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_data_bytes_outputs_taken{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[1m])) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Bytes Taken / Second: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Output Bytes Taken by Downstream Operators / Second",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "Bps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Byte size of output blocks from finished tasks per second, grouped by node.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 9
          },
          "hiddenSeries": false,
          "id": 43,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_data_bytes_outputs_of_finished_tasks_per_node{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[1m])) by (dataset, node_ip)",
              "interval": "",
              "legendFormat": "Bytes output / Second: {{dataset}}, {{node_ip}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Output Bytes from Finished Tasks / Second (by Node)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "Bps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of output blocks from finished tasks per second, grouped by node.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 9
          },
          "hiddenSeries": false,
          "id": 48,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_data_blocks_outputs_of_finished_tasks_per_node{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[1m])) by (dataset, node_ip)",
              "interval": "",
              "legendFormat": "Blocks output / Second: {{dataset}}, {{node_ip}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Blocks from Finished Tasks / Second (by Node)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "blocks/s",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of submitted tasks.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 10
          },
          "hiddenSeries": false,
          "id": 29,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_num_tasks_submitted{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Submitted Tasks: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Submitted Tasks",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "tasks",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of running tasks.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 10
          },
          "hiddenSeries": false,
          "id": 30,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_num_tasks_running{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Running Tasks: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Running Tasks",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "tasks",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of tasks that already have output.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 11
          },
          "hiddenSeries": false,
          "id": 31,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_num_tasks_have_outputs{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Tasks with output blocks: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Tasks with output blocks",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "tasks",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of finished tasks.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 11
          },
          "hiddenSeries": false,
          "id": 32,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_num_tasks_finished{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Finished Tasks: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Finished Tasks",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "tasks",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of finished tasks per second, grouped by node.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 12
          },
          "hiddenSeries": false,
          "id": 46,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_data_num_tasks_finished_per_node{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[1m])) by (dataset, node_ip)",
              "interval": "",
              "legendFormat": "Finished Tasks: {{dataset}}, {{node_ip}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Task Throughput (by Node)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "tasks/s",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of failed tasks.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 12
          },
          "hiddenSeries": false,
          "id": 33,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_num_tasks_failed{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Failed Tasks: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Failed Tasks",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "tasks",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Time spent generating blocks in tasks.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 13
          },
          "hiddenSeries": false,
          "id": 8,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_block_generation_time{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Block Generation Time: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Block Generation Time",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "seconds",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Time spent in task submission backpressure.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 13
          },
          "hiddenSeries": false,
          "id": 37,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_task_submission_backpressure_time{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Backpressure Time: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Task Submission Backpressure Time",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "seconds",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of blocks in operator's internal input queue",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 14
          },
          "hiddenSeries": false,
          "id": 13,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_obj_store_mem_internal_inqueue_blocks{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Number of Blocks: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Operator Internal Inqueue Size (Blocks)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "blocks",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Byte size of input blocks in the operator's internal input queue.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 14
          },
          "hiddenSeries": false,
          "id": 14,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_obj_store_mem_internal_inqueue{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Bytes Size: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Operator Internal Inqueue Size (Bytes)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "bytes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of blocks in operator's internal output queue",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 15
          },
          "hiddenSeries": false,
          "id": 15,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_obj_store_mem_internal_outqueue_blocks{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Number of Blocks: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Operator Internal Outqueue Size (Blocks)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "blocks",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Byte size of output blocks in the operator's internal output queue.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 15
          },
          "hiddenSeries": false,
          "id": 16,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_obj_store_mem_internal_outqueue{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Bytes Size: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Operator Internal Outqueue Size (Bytes)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "bytes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Byte size of input blocks used by pending tasks.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 16
          },
          "hiddenSeries": false,
          "id": 34,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_obj_store_mem_pending_task_inputs{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Bytes Size: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Size of Blocks used in Pending Tasks (Bytes)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "bytes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Byte size of freed memory in object store.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 16
          },
          "hiddenSeries": false,
          "id": 35,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_obj_store_mem_freed{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Bytes Size: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Freed Memory in Object Store (Bytes)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "bytes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Byte size of spilled memory in object store.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 17
          },
          "hiddenSeries": false,
          "id": 36,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_obj_store_mem_spilled{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset, operator)",
              "interval": "",
              "legendFormat": "Bytes Size: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Spilled Memory in Object Store (Bytes)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "bytes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Seconds spent in iterator initialization code",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 17
          },
          "hiddenSeries": false,
          "id": 12,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_iter_initialize_seconds{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset)",
              "interval": "",
              "legendFormat": "Seconds: {{dataset}}, {{operator}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Iteration Initialization Time",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "seconds",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Seconds user thread is blocked by iter_batches()",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 18
          },
          "hiddenSeries": false,
          "id": 9,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_iter_total_blocked_seconds{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset)",
              "interval": "",
              "legendFormat": "Seconds: {{dataset}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Iteration Blocked Time",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "seconds",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Seconds spent in user code",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 18
          },
          "hiddenSeries": false,
          "id": 10,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_data_iter_user_seconds{dataset=~\"$DatasetID\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (dataset)",
              "interval": "",
              "legendFormat": "Seconds: {{dataset}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Iteration User Time",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "seconds",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        }
      ],
      "refresh": false,
      "schemaVersion": 27,
      "style": "dark",
      "tags": [
        "rayVersion:2.46.0"
      ],
      "templating": {
        "list": [
          {
            "current": {
              "selected": false
            },
            "description": "Filter queries of a specific Prometheus type.",
            "hide": 2,
            "includeAll": false,
            "multi": false,
            "name": "datasource",
            "options": [],
            "query": "prometheus",
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "type": "datasource"
          },
          {
            "allValue": ".+",
            "current": {
              "selected": false
            },
            "datasource": "${datasource}",
            "definition": "label_values(ray_data_allocated_bytes{}, SessionName)",
            "description": "Filter queries to specific ray sessions.",
            "error": null,
            "hide": 0,
            "includeAll": true,
            "label": null,
            "multi": false,
            "name": "SessionName",
            "options": [],
            "query": {
              "query": "label_values(ray_data_allocated_bytes{}, SessionName)",
              "refId": "StandardVariableQuery"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 2,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          },
          {
            "allValue": ".+",
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": "${datasource}",
            "definition": "label_values(ray_data_allocated_bytes{}, dataset)",
            "description": null,
            "error": null,
            "hide": 0,
            "includeAll": true,
            "label": null,
            "multi": true,
            "name": "DatasetID",
            "options": [],
            "query": {
              "query": "label_values(ray_data_allocated_bytes{}, dataset)",
              "refId": "Prometheus-Dataset-Variable-Query"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          },
          {
            "current": {
              "selected": false
            },
            "datasource": "${datasource}",
            "definition": "label_values(ray_node_network_receive_speed{}, ray_io_cluster)",
            "description": "Filter queries to specific Ray clusters for KubeRay. When ingesting metrics across multiple ray clusters, the ray_io_cluster label should be set per cluster. For KubeRay users, this is done automaticaly with Prometheus PodMonitor.",
            "error": null,
            "hide": 0,
            "includeAll": true,
            "label": null,
            "multi": false,
            "name": "Cluster",
            "options": [],
            "query": {
              "query": "label_values(ray_node_network_receive_speed{}, ray_io_cluster)",
              "refId": "StandardVariableQuery"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 2,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          }
        ]
      },
      "rayMeta": [
        "excludesSystemRoutes",
        "supportsGlobalFilterOverride"
      ],
      "time": {
        "from": "now-30m",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Data Dashboard",
      "uid": "rayDataDashboard",
      "version": 1
    }
  default_grafana_dashboard.json: |-
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": "-- Grafana --",
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "type": "dashboard"
          }
        ]
      },
      "editable": true,
      "gnetId": null,
      "graphTooltip": 1,
      "iteration": 1667344411089,
      "links": [],
      "panels": [
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Current number of tasks in a particular state.\n\nState: the task state, as described by rpc::TaskState proto in common.proto. Task resubmissions due to failures or object reconstruction are shown with (retry) in the label.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 0
          },
          "hiddenSeries": false,
          "id": 26,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(max_over_time(ray_tasks{IsRetry=\"0\",State=~\"FINISHED|FAILED\",instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[14d])) by (State) or clamp_min(sum(ray_tasks{IsRetry=\"0\",State!~\"FINISHED|FAILED\",instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (State), 0)",
              "interval": "",
              "legendFormat": "{{State}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(max_over_time(ray_tasks{IsRetry!=\"0\",State=~\"FINISHED|FAILED\",instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}[14d])) by (State) or clamp_min(sum(ray_tasks{IsRetry!=\"0\",State!~\"FINISHED|FAILED\",instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (State), 0)",
              "interval": "",
              "legendFormat": "{{State}} (retry)",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Scheduler Task State",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "tasks",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Current number of (live) tasks with a particular name. Task resubmissions due to failures or object reconstruction are shown with (retry) in the label.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 0
          },
          "hiddenSeries": false,
          "id": 35,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "clamp_min(sum(ray_tasks{IsRetry=\"0\",State!~\"FINISHED|FAILED\",instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (Name), 0)",
              "interval": "",
              "legendFormat": "{{Name}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "clamp_min(sum(ray_tasks{IsRetry!=\"0\",State!~\"FINISHED|FAILED\",instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (Name), 0)",
              "interval": "",
              "legendFormat": "{{Name}} (retry)",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Requested Live Tasks by Name",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "tasks",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Current number of (running) tasks with a particular name. Task resubmissions due to failures or object reconstruction are shown with (retry) in the label.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 1
          },
          "hiddenSeries": false,
          "id": 38,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "clamp_min(sum(ray_tasks{IsRetry=\"0\",State=~\"RUNNING*\",instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (Name), 0)",
              "interval": "",
              "legendFormat": "{{Name}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "clamp_min(sum(ray_tasks{IsRetry!=\"0\",State=~\"RUNNING*\",instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (Name), 0)",
              "interval": "",
              "legendFormat": "{{Name}} (retry)",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Running Tasks by Name",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "tasks",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Note: not impacted by \"Instance\" variable.\n\nCurrent number of actors in a particular state.\n\nState: the actor state, as described by rpc::ActorTableData proto in gcs.proto.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 1
          },
          "hiddenSeries": false,
          "id": 33,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_actors{Source=\"gcs\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (State)",
              "interval": "",
              "legendFormat": "{{State}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Scheduler Actor State",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "actors",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Current number of alive actors in a particular state.\n\nState: IDLE, RUNNING_TASK, RUNNING_IN_RAY_GET, RUNNING_IN_RAY_WAIT",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 2
          },
          "hiddenSeries": false,
          "id": 42,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_actors{Source=\"executor\",NodeAddress=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (State)",
              "interval": "",
              "legendFormat": "{{State}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Live Actor State",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "actors",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Current number of alive actors with a particular name.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 2
          },
          "hiddenSeries": false,
          "id": 36,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_actors{State!=\"DEAD\",Source=\"executor\",NodeAddress=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (Name)",
              "interval": "",
              "legendFormat": "{{Name}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Live Actors by Name",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "actors",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Logical CPU usage of Ray. The dotted line indicates the total number of CPUs. The logical CPU is allocated by `num_cpus` arguments from tasks and actors. PENDING means the number of CPUs that will be available when new nodes are up after the autoscaler scales up.\n\nNOTE: Ray's logical CPU is different from physical CPU usage. Ray's logical CPU is allocated by `num_cpus` arguments.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 3
          },
          "hiddenSeries": false,
          "id": 27,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_resources{Name=\"CPU\",State=\"USED\",instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (instance)",
              "interval": "",
              "legendFormat": "CPU Usage: {{instance}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_resources{Name=\"CPU\",instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",})",
              "interval": "",
              "legendFormat": "MAX",
              "queryType": "randomWalk",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "((sum(autoscaler_cluster_resources{resource=\"CPU\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) or vector(0)) + (sum(autoscaler_pending_resources{resource=\"CPU\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) or vector(0)) and (sum(autoscaler_cluster_resources{resource=\"CPU\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) or vector(0)) + (sum(autoscaler_pending_resources{resource=\"CPU\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) or vector(0)) > (sum(autoscaler_cluster_resources{resource=\"CPU\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) or vector(0)))",
              "interval": "",
              "legendFormat": "MAX + PENDING",
              "queryType": "randomWalk",
              "refId": "C"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Scheduler CPUs (logical slots)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "cores",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Object store memory usage by location. The dotted line indicates the object store memory capacity.\n\nLocation: where the memory was allocated, which is MMAP_SHM or MMAP_DISK to indicate memory-mapped page, SPILLED to indicate spillage to disk, and WORKER_HEAP for objects small enough to be inlined in worker memory. Refer to metric_defs.cc for more information.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 3
          },
          "hiddenSeries": false,
          "id": 29,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_object_store_memory{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (Location)",
              "interval": "",
              "legendFormat": "{{Location}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_resources{Name=\"object_store_memory\",instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",})",
              "interval": "",
              "legendFormat": "MAX",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Object Store Memory",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "bytes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Logical GPU usage of Ray. The dotted line indicates the total number of GPUs. The logical GPU is allocated by `num_gpus` arguments from tasks and actors. PENDING means the number of GPUs that will be available when new nodes are up after the autoscaler scales up.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 4
          },
          "hiddenSeries": false,
          "id": 28,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_resources{Name=\"GPU\",State=\"USED\",instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (instance)",
              "interval": "",
              "legendFormat": "GPU Usage: {{instance}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_resources{Name=\"GPU\",instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",})",
              "interval": "",
              "legendFormat": "MAX",
              "queryType": "randomWalk",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "((sum(autoscaler_cluster_resources{resource=\"GPU\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) or vector(0)) + (sum(autoscaler_pending_resources{resource=\"GPU\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) or vector(0)) and (sum(autoscaler_cluster_resources{resource=\"GPU\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) or vector(0)) + (sum(autoscaler_pending_resources{resource=\"GPU\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) or vector(0)) > (sum(autoscaler_cluster_resources{resource=\"GPU\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) or vector(0)))",
              "interval": "",
              "legendFormat": "MAX + PENDING",
              "queryType": "randomWalk",
              "refId": "C"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Scheduler GPUs (logical slots)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "GPUs",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Note: not impacted by \"Instance\" variable.\n\nCurrent number of placement groups in a particular state.\n\nState: the placement group state, as described by the rpc::PlacementGroupTable proto in gcs.proto.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 4
          },
          "hiddenSeries": false,
          "id": 40,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_placement_groups{SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (State)",
              "interval": "",
              "legendFormat": "{{State}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Scheduler Placement Groups",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "placement groups",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 5
          },
          "hiddenSeries": false,
          "id": 2,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_node_cpu_utilization{instance=~\"$Instance\", IsHeadNode=\"false\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",} * ray_node_cpu_count{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",} / 100) by (instance)",
              "interval": "",
              "legendFormat": "CPU Usage: {{instance}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_cpu_utilization{instance=~\"$Instance\", IsHeadNode=\"true\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",} * ray_node_cpu_count{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",} / 100) by (instance)",
              "interval": "",
              "legendFormat": "CPU Usage: {{instance}} (head)",
              "queryType": "randomWalk",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_cpu_count{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",})",
              "interval": "",
              "legendFormat": "MAX",
              "queryType": "randomWalk",
              "refId": "C"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Node CPU (hardware utilization)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "cores",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Node's physical (hardware) GPU usage. The dotted line means the total number of hardware GPUs from the cluster. ",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 5
          },
          "hiddenSeries": false,
          "id": 8,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_node_gpus_utilization{instance=~\"$Instance\", IsHeadNode=\"false\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",} / 100) by (instance, GpuIndex, GpuDeviceName)",
              "interval": "",
              "legendFormat": "GPU Usage: {{instance}}, gpu.{{GpuIndex}}, {{GpuDeviceName}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_gpus_utilization{instance=~\"$Instance\", IsHeadNode=\"true\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",} / 100) by (instance, GpuIndex, GpuDeviceName)",
              "interval": "",
              "legendFormat": "GPU Usage: {{instance}} (head), gpu.{{GpuIndex}}, {{GpuDeviceName}}",
              "queryType": "randomWalk",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_gpus_available{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",})",
              "interval": "",
              "legendFormat": "MAX",
              "queryType": "randomWalk",
              "refId": "C"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Node GPU (hardware utilization)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "GPUs",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Node's physical (hardware) disk usage. The dotted line means the total amount of disk space from the cluster.\n\nNOTE: When Ray is deployed within a container, this shows the disk usage from the host machine. ",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 6
          },
          "hiddenSeries": false,
          "id": 6,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_node_disk_usage{instance=~\"$Instance\", IsHeadNode=\"false\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (instance)",
              "interval": "",
              "legendFormat": "Disk Used: {{instance}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_disk_usage{instance=~\"$Instance\", IsHeadNode=\"true\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (instance)",
              "interval": "",
              "legendFormat": "Disk Used: {{instance}} (head)",
              "queryType": "randomWalk",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_disk_free{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) + sum(ray_node_disk_usage{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",})",
              "interval": "",
              "legendFormat": "MAX",
              "queryType": "randomWalk",
              "refId": "C"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Node Disk",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "bytes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Disk IO per node.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 6
          },
          "hiddenSeries": false,
          "id": 32,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_node_disk_io_write_speed{instance=~\"$Instance\", IsHeadNode=\"false\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (instance)",
              "interval": "",
              "legendFormat": "Write: {{instance}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_disk_io_write_speed{instance=~\"$Instance\", IsHeadNode=\"true\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (instance)",
              "interval": "",
              "legendFormat": "Write: {{instance}} (head)",
              "queryType": "randomWalk",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_disk_io_read_speed{instance=~\"$Instance\", IsHeadNode=\"false\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (instance)",
              "interval": "",
              "legendFormat": "Read: {{instance}}",
              "queryType": "randomWalk",
              "refId": "C"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_disk_io_read_speed{instance=~\"$Instance\", IsHeadNode=\"true\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (instance)",
              "interval": "",
              "legendFormat": "Read: {{instance}} (head)",
              "queryType": "randomWalk",
              "refId": "D"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Node Disk IO Speed",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "Bps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The physical (hardware) memory usage for each node. The dotted line means the total amount of memory from the cluster. Node memory is a sum of object store memory (shared memory) and heap memory.\n\nNote: If Ray is deployed within a container, the total memory could be lower than the host machine because Ray may reserve some additional memory space outside the container.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 7
          },
          "hiddenSeries": false,
          "id": 4,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_node_mem_used{instance=~\"$Instance\", IsHeadNode=\"false\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (instance)",
              "interval": "",
              "legendFormat": "Memory Used: {{instance}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_mem_used{instance=~\"$Instance\", IsHeadNode=\"true\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (instance)",
              "interval": "",
              "legendFormat": "Memory Used: {{instance}} (head)",
              "queryType": "randomWalk",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_mem_total{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",})",
              "interval": "",
              "legendFormat": "MAX",
              "queryType": "randomWalk",
              "refId": "C"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Node Memory (heap + object store)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "bytes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The percentage of physical (hardware) memory usage for each node.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 7
          },
          "hiddenSeries": false,
          "id": 48,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_node_mem_used{instance=~\"$Instance\", IsHeadNode=\"false\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}/ray_node_mem_total{instance=~\"$Instance\", IsHeadNode=\"false\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",} * 100) by (instance)",
              "interval": "",
              "legendFormat": "Memory Used: {{instance}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_mem_used{instance=~\"$Instance\", IsHeadNode=\"true\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}/ray_node_mem_total{instance=~\"$Instance\", IsHeadNode=\"true\", SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",} * 100) by (instance)",
              "interval": "",
              "legendFormat": "Memory Used: {{instance}} (head)",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Node Memory Percentage (heap + object store)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "%",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The number of tasks and actors killed by the Ray Out of Memory killer due to high memory pressure. Metrics are broken down by IP and the name. https://docs.ray.io/en/master/ray-core/scheduling/ray-oom-prevention.html.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 8
          },
          "hiddenSeries": false,
          "id": 44,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_memory_manager_worker_eviction_total{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (Name, instance)",
              "interval": "",
              "legendFormat": "OOM Killed: {{Name}}, {{instance}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Node Out of Memory Failures by Name",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "failures",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The physical (hardware) memory usage across the cluster, broken down by component. This reports the summed RSS-SHM per Ray component, which corresponds to an approximate memory usage per proc. Ray components consist of system components (e.g., raylet, gcs, dashboard, or agent) and the process (that contains method names) names of running tasks/actors.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 8
          },
          "hiddenSeries": false,
          "id": 34,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "(sum(ray_component_rss_mb{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",} * 1e6) by (Component)) - (sum(ray_component_mem_shared_bytes{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (Component))",
              "interval": "",
              "legendFormat": "{{Component}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_mem_shared_bytes{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",})",
              "interval": "",
              "legendFormat": "shared_memory",
              "queryType": "randomWalk",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_mem_total{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",})",
              "interval": "",
              "legendFormat": "MAX",
              "queryType": "randomWalk",
              "refId": "C"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Node Memory by Component",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "bytes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The physical (hardware) CPU usage across the cluster, broken down by component. This reports the summed CPU usage per Ray component. Ray components consist of system components (e.g., raylet, gcs, dashboard, or agent) and the process (that contains method names) names of running tasks/actors.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 9
          },
          "hiddenSeries": false,
          "id": 37,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_component_cpu_percentage{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (Component) / 100",
              "interval": "",
              "legendFormat": "{{Component}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_cpu_count{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",})",
              "interval": "",
              "legendFormat": "MAX",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Node CPU by Component",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "cores",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The physical (hardware) GPU memory usage for each node. The dotted line means the total amount of GPU memory from the cluster.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 9
          },
          "hiddenSeries": false,
          "id": 18,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_node_gram_used{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",} * 1024 * 1024) by (instance, GpuIndex, GpuDeviceName)",
              "interval": "",
              "legendFormat": "Used GRAM: {{instance}}, gpu.{{GpuIndex}}, {{GpuDeviceName}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "(sum(ray_node_gram_available{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) + sum(ray_node_gram_used{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",})) * 1024 * 1024",
              "interval": "",
              "legendFormat": "MAX",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Node GPU Memory (GRAM)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "bytes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Network speed per node",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 10
          },
          "hiddenSeries": false,
          "id": 20,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_node_network_receive_speed{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (instance)",
              "interval": "",
              "legendFormat": "Recv: {{instance}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_network_send_speed{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (instance)",
              "interval": "",
              "legendFormat": "Send: {{instance}}",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Node Network",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "Bps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Note: not impacted by \"Instance\" variable.\n\nA total number of active failed, and pending nodes from the cluster. \n\nACTIVE: A node is alive and available.\n\nFAILED: A node is dead and not available. The node is considered dead when the raylet process on the node is terminated. The node will get into the failed state if it cannot be provided (e.g., there's no available node from the cloud provider) or failed to setup (e.g., setup_commands have errors). \n\nPending: A node is being started by the Ray cluster launcher. The node is unavailable now because it is being provisioned and initialized.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 10
          },
          "hiddenSeries": false,
          "id": 24,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(autoscaler_active_nodes{SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (NodeType)",
              "interval": "",
              "legendFormat": "Active Nodes: {{NodeType}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(autoscaler_recently_failed_nodes{SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (NodeType)",
              "interval": "",
              "legendFormat": "Failed Nodes: {{NodeType}}",
              "queryType": "randomWalk",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "sum(autoscaler_pending_nodes{SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) by (NodeType)",
              "interval": "",
              "legendFormat": "Pending Nodes: {{NodeType}}",
              "queryType": "randomWalk",
              "refId": "C"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Node Count",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "nodes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Aggregated utilization of all physical resources (CPU, GPU, memory, disk, or etc.) across the cluster.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 11
          },
          "hiddenSeries": false,
          "id": 41,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "avg(ray_node_cpu_utilization{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",})",
              "interval": "",
              "legendFormat": "CPU (physical)",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_gpus_utilization{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) / on() (sum(autoscaler_cluster_resources{resource=\"GPU\",instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) or vector(0))",
              "interval": "",
              "legendFormat": "GPU (physical)",
              "queryType": "randomWalk",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_mem_used{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) / on() (sum(ray_node_mem_total{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",})) * 100",
              "interval": "",
              "legendFormat": "Memory (RAM)",
              "queryType": "randomWalk",
              "refId": "C"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_gram_used{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) / on() (sum(ray_node_gram_available{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) + sum(ray_node_gram_used{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",})) * 100",
              "interval": "",
              "legendFormat": "GRAM",
              "queryType": "randomWalk",
              "refId": "D"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_object_store_memory{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) / on() sum(ray_resources{Name=\"object_store_memory\",instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) * 100",
              "interval": "",
              "legendFormat": "Object Store Memory",
              "queryType": "randomWalk",
              "refId": "E"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_disk_usage{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) / on() (sum(ray_node_disk_free{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",}) + sum(ray_node_disk_usage{instance=~\"$Instance\",SessionName=~\"$SessionName\",neutree_cluster=~\"$Cluster\",})) * 100",
              "interval": "",
              "legendFormat": "Disk",
              "queryType": "randomWalk",
              "refId": "F"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Cluster Utilization",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "%",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        }
      ],
      "refresh": false,
      "schemaVersion": 27,
      "style": "dark",
      "tags": [
        "rayVersion:2.46.0"
      ],
      "templating": {
        "list": [
          {
            "current": {
              "selected": false
            },
            "description": "Filter queries of a specific Prometheus type.",
            "hide": 2,
            "includeAll": false,
            "multi": false,
            "name": "datasource",
            "options": [],
            "query": "prometheus",
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "type": "datasource"
          },
          {
            "allValue": ".+",
            "current": {
              "selected": false
            },
            "datasource": "${datasource}",
            "definition": "label_values(ray_node_network_receive_speed{}, SessionName)",
            "description": "Filter queries to specific ray sessions.",
            "error": null,
            "hide": 0,
            "includeAll": true,
            "label": null,
            "multi": false,
            "name": "SessionName",
            "options": [],
            "query": {
              "query": "label_values(ray_node_network_receive_speed{}, SessionName)",
              "refId": "StandardVariableQuery"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 2,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          },
          {
            "allValue": ".+",
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": "${datasource}",
            "definition": "label_values(ray_node_network_receive_speed{SessionName=~\"$SessionName\",}, instance)",
            "description": null,
            "error": null,
            "hide": 0,
            "includeAll": true,
            "label": null,
            "multi": true,
            "name": "Instance",
            "options": [],
            "query": {
              "query": "label_values(ray_node_network_receive_speed{SessionName=~\"$SessionName\",}, instance)",
              "refId": "Prometheus-Instance-Variable-Query"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          },
          {
            "current": {
              "selected": false
            },
            "datasource": "${datasource}",
            "definition": "label_values(ray_node_network_receive_speed{}, ray_io_cluster)",
            "description": "Filter queries to specific Ray clusters for KubeRay. When ingesting metrics across multiple ray clusters, the ray_io_cluster label should be set per cluster. For KubeRay users, this is done automaticaly with Prometheus PodMonitor.",
            "error": null,
            "hide": 0,
            "includeAll": true,
            "label": null,
            "multi": false,
            "name": "Cluster",
            "options": [],
            "query": {
              "query": "label_values(ray_node_network_receive_speed{}, ray_io_cluster)",
              "refId": "StandardVariableQuery"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 2,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          }
        ]
      },
      "time": {
        "from": "now-30m",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Default Dashboard",
      "uid": "rayDefaultDashboard",
      "version": 4,
      "rayMeta": [
        "supportsGlobalFilterOverride"
      ]
    }
  router_dashboard.json: |-
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "grafana",
              "uid": "-- Grafana --"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0,211,255,1)",
            "name": "Annotations & Alerts",
            "type": "dashboard"
          }
        ]
      },
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "id": null,
      "links": [],
      "panels": [
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 0
          },
          "id": 100,
          "panels": [],
          "title": "Overview System Performance",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Number of healthy LLM instances (by instance usage)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 0,
            "y": 1
          },
          "id": 1,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.5.3",
          "targets": [
            {
              "disableTextWrap": false,
              "editorMode": "code",
              "expr": "sum(max by(endpoint,server) (router:healthy_pods_total{neutree_cluster=~\"$Cluster\"}))",
              "format": "time_series",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "legendFormat": "Available LLM instances",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Available LLM instances",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 12,
            "y": 1
          },
          "id": 3,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.5.3",
          "targets": [
            {
              "editorMode": "code",
              "expr": "sum(router:current_qps)",
              "legendFormat": "Current QPS",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Current QPS",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Average end-to-end request latency in seconds",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 1
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 8
          },
          "id": 19,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.5.3",
          "targets": [
            {
              "editorMode": "code",
              "expr": "avg(router:avg_latency{neutree_cluster=~\"$Cluster\"})",
              "legendFormat": "Average Latency",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Average Latency",
          "type": "stat"
        },
        {
          "collapsed": false,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 16
          },
          "id": 103,
          "panels": [],
          "title": "Current Resource Usage",
          "type": "row"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 0,
            "y": 17
          },
          "id": 15,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "11.5.3",
          "targets": [
            {
              "disableTextWrap": false,
              "editorMode": "code",
              "expr": "router_cpu_usage_percent{neutree_cluster=~\"$Cluster\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "CPU Usage (%)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 8,
            "y": 17
          },
          "id": 16,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "11.5.3",
          "targets": [
            {
              "disableTextWrap": false,
              "editorMode": "code",
              "expr": "router_memory_usage_percent{neutree_cluster=~\"$Cluster\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Memory Usage (%)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 16,
            "y": 17
          },
          "id": 17,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "11.5.3",
          "targets": [
            {
              "disableTextWrap": false,
              "editorMode": "code",
              "expr": "router_disk_usage_percent{neutree_cluster=~\"$Cluster\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Disk Usage (%)",
          "type": "timeseries"
        }
      ],
      "preload": false,
      "refresh": "auto",
      "schemaVersion": 40,
      "tags": [],
      "templating": {
        "list": [
          {
            "current": {
              "text": "${DS_PROMETHEUS}",
              "value": "${DS_PROMETHEUS}"
            },
            "name": "datasource",
            "options": [],
            "query": "prometheus",
            "refresh": 1,
            "regex": "",
            "type": "datasource"
          },
          {
            "allValue": ".*",
            "allowCustomValue": false,
            "current": {
              "text": "All",
              "value": "$__all"
            },
            "datasource": {
              "type": "prometheus",
              "uid": "${datasource}"
            },
            "definition": "label_values(router_cpu_usage_percent,neutree_cluster)",
            "includeAll": true,
            "name": "Cluster",
            "options": [],
            "query": {
              "qryType": 1,
              "query": "label_values(router_cpu_usage_percent,neutree_cluster)",
              "refId": "PrometheusVariableQueryEditor-VariableQuery"
            },
            "refresh": 1,
            "regex": "",
            "type": "query"
          }
        ]
      },
      "time": {
        "from": "now-5m",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "browser",
      "title": "Router Dashboard",
      "uid": "router",
      "version": 7,
      "weekStart": ""
    }
  serve_deployment_grafana_dashboard.json: |-
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": "-- Grafana --",
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "type": "dashboard"
          }
        ]
      },
      "editable": true,
      "gnetId": null,
      "graphTooltip": 1,
      "iteration": 1667344411089,
      "links": [],
      "panels": [
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of replicas per deployment. Ignores \"Route\" variable.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 0,
            "y": 0,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 1,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_serve_deployment_replica_healthy{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}) by (application, deployment)",
              "interval": "",
              "legendFormat": "{{application}}#{{deployment}}#{{replica}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Replicas per deployment",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "replicas",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "QPS for each replica.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 8,
            "y": 0,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 2,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_serve_deployment_request_counter_total{route=~\"$Route\",route!~\"/-/.*\",application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, deployment, replica)",
              "interval": "",
              "legendFormat": "{{application}}#{{deployment}}#{{replica}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "QPS per replica",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "qps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Error QPS for each replica.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 16,
            "y": 0,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 3,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_serve_deployment_error_counter_total{route=~\"$Route\",route!~\"/-/.*\",application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, deployment, replica)",
              "interval": "",
              "legendFormat": "{{application}}#{{deployment}}#{{replica}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Error QPS per replica",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "qps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "P50 latency per replica.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 0,
            "y": 1,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 4,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.5, sum(rate(ray_serve_deployment_processing_latency_ms_bucket{route=~\"$Route\",route!~\"/-/.*\",application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, deployment, replica, le))",
              "interval": "",
              "legendFormat": "{{application}}#{{deployment}}#{{replica}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.5, sum(rate(ray_serve_deployment_processing_latency_ms_bucket{route=~\"$Route\",route!~\"/-/.*\",application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}[5m])) by (le))",
              "interval": "",
              "legendFormat": "Total",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "P50 latency per replica",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "ms",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "P90 latency per replica.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 8,
            "y": 1,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 5,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.9, sum(rate(ray_serve_deployment_processing_latency_ms_bucket{route=~\"$Route\",route!~\"/-/.*\",application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, deployment, replica, le))",
              "interval": "",
              "legendFormat": "{{application}}#{{deployment}}#{{replica}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.9, sum(rate(ray_serve_deployment_processing_latency_ms_bucket{route=~\"$Route\",route!~\"/-/.*\",application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}[5m])) by (le))",
              "interval": "",
              "legendFormat": "Total",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "P90 latency per replica",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "ms",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "P99 latency per replica.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 16,
            "y": 1,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 6,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.99, sum(rate(ray_serve_deployment_processing_latency_ms_bucket{route=~\"$Route\",route!~\"/-/.*\",application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, deployment, replica, le))",
              "interval": "",
              "legendFormat": "{{application}}#{{deployment}}#{{replica}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.99, sum(rate(ray_serve_deployment_processing_latency_ms_bucket{route=~\"$Route\",application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}[5m])) by (le))",
              "interval": "",
              "legendFormat": "Total",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "P99 latency per replica",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "ms",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of requests queued per deployment. Ignores \"Replica\" and \"Route\" variable.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 0,
            "y": 2,
            "w": 12,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 7,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_serve_deployment_queued_queries{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}) by (application, deployment)",
              "interval": "",
              "legendFormat": "{{application}}#{{deployment}}#{{replica}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Queue size per deployment",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "requests",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Current running requests for each replica.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 12,
            "y": 2,
            "w": 12,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 8,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_serve_replica_processing_queries{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}) by (application, deployment, replica)",
              "interval": "",
              "legendFormat": "{{application}}#{{deployment}}#{{replica}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Running requests per replica",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "requests",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The number of multiplexed models for each replica.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 0,
            "y": 3,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 9,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_serve_num_multiplexed_models{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}) by (application, deployment, replica)",
              "interval": "",
              "legendFormat": "{{application}}#{{deployment}}#{{replica}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Multiplexed models per replica",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "models",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The number of times of multiplexed models loaded for each replica.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 8,
            "y": 3,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 10,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_serve_multiplexed_models_load_counter_total{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}) by (application, deployment, replica)",
              "interval": "",
              "legendFormat": "{{application}}#{{deployment}}#{{replica}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Multiplexed model loads per replica",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "times",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The number of times of multiplexed models unloaded for each replica.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 16,
            "y": 3,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 11,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_serve_multiplexed_models_unload_counter_total{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}) by (application, deployment, replica)",
              "interval": "",
              "legendFormat": "{{application}}#{{deployment}}#{{replica}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Multiplexed model unloads per replica",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "times",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "P99 latency of mutliplexed model load per replica.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 0,
            "y": 4,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 12,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.99, sum(rate(ray_serve_multiplexed_model_load_latency_ms_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, deployment, replica, le))",
              "interval": "",
              "legendFormat": "{{application}}#{{deployment}}#{{replica}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "P99 latency of multiplexed model loads per replica",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "ms",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "P99 latency of mutliplexed model unload per replica.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 8,
            "y": 4,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 13,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.99, sum(rate(ray_serve_multiplexed_model_unload_latency_ms_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, deployment, replica, le))",
              "interval": "",
              "legendFormat": "{{application}}#{{deployment}}#{{replica}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "P99 latency of multiplexed model unloads per replica",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "ms",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The ids of multiplexed models for each replica.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 16,
            "y": 4,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 14,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "ray_serve_registered_multiplexed_model_id{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}",
              "interval": "",
              "legendFormat": "{{replica}}:{{model_id}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Multiplexed model ids per replica",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "model",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The cache hit rate of multiplexed models for the deployment.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 0,
            "y": 5,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 15,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "(1 - sum(rate(ray_serve_multiplexed_models_load_counter_total{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}[5m]))/sum(rate(ray_serve_multiplexed_get_model_requests_counter_total{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\",}[5m])))",
              "interval": "",
              "legendFormat": "{{application}}#{{deployment}}#{{replica}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Multiplexed model cache hit rate",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "%",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        }
      ],
      "refresh": false,
      "schemaVersion": 27,
      "style": "dark",
      "tags": [
        "rayVersion:2.46.0"
      ],
      "templating": {
        "list": [
          {
            "current": {
              "selected": false
            },
            "description": "Filter queries to specific prometheus type.",
            "hide": 2,
            "includeAll": false,
            "multi": false,
            "name": "datasource",
            "options": [],
            "query": "prometheus",
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "type": "datasource"
          },
          {
            "allValue": ".*",
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": "${datasource}",
            "definition": "label_values(ray_serve_deployment_replica_healthy{}, application)",
            "description": null,
            "error": null,
            "hide": 0,
            "includeAll": true,
            "label": null,
            "multi": true,
            "name": "Application",
            "options": [],
            "query": {
              "query": "label_values(ray_serve_deployment_replica_healthy{}, application)",
              "refId": "Prometheus-Instance-Variable-Query"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          },
          {
            "allValue": ".*",
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": "${datasource}",
            "definition": "label_values(ray_serve_deployment_replica_healthy{application=~\"$Application\",}, deployment)",
            "description": null,
            "error": null,
            "hide": 0,
            "includeAll": true,
            "label": null,
            "multi": true,
            "name": "Deployment",
            "options": [],
            "query": {
              "query": "label_values(ray_serve_deployment_replica_healthy{application=~\"$Application\",}, deployment)",
              "refId": "Prometheus-Instance-Variable-Query"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          },
          {
            "allValue": ".*",
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": "${datasource}",
            "definition": "label_values(ray_serve_deployment_replica_healthy{application=~\"$Application\",deployment=~\"$Deployment\",}, replica)",
            "description": null,
            "error": null,
            "hide": 0,
            "includeAll": true,
            "label": null,
            "multi": true,
            "name": "Replica",
            "options": [],
            "query": {
              "query": "label_values(ray_serve_deployment_replica_healthy{application=~\"$Application\",deployment=~\"$Deployment\",}, replica)",
              "refId": "Prometheus-Instance-Variable-Query"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          },
          {
            "allValue": ".*",
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": "${datasource}",
            "definition": "label_values(ray_serve_deployment_request_counter{deployment=~\"$Deployment\",}, route)",
            "description": null,
            "error": null,
            "hide": 0,
            "includeAll": true,
            "label": null,
            "multi": true,
            "name": "Route",
            "options": [],
            "query": {
              "query": "label_values(ray_serve_deployment_request_counter{deployment=~\"$Deployment\",}, route)",
              "refId": "Prometheus-Instance-Variable-Query"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          },
          {
            "current": {
              "selected": false
            },
            "datasource": "${datasource}",
            "definition": "label_values(ray_node_network_receive_speed{}, ray_io_cluster)",
            "description": "Filter queries to specific Ray clusters for KubeRay. When ingesting metrics across multiple ray clusters, the ray_io_cluster label should be set per cluster. For KubeRay users, this is done automaticaly with Prometheus PodMonitor.",
            "error": null,
            "hide": 0,
            "includeAll": true,
            "label": null,
            "multi": false,
            "name": "Cluster",
            "options": [],
            "query": {
              "query": "label_values(ray_node_network_receive_speed{}, ray_io_cluster)",
              "refId": "StandardVariableQuery"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 2,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          }
        ]
      },
      "rayMeta": [
        "excludesSystemRoutes",
        "supportsGlobalFilterOverride"
      ],
      "time": {
        "from": "now-30m",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Serve Deployment Dashboard",
      "uid": "rayServeDeploymentDashboard",
      "version": 1
    }
  serve_grafana_dashboard.json: |-
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": "-- Grafana --",
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "type": "dashboard"
          }
        ]
      },
      "editable": true,
      "gnetId": null,
      "graphTooltip": 0,
      "iteration": 1667344411089,
      "links": [],
      "panels": [
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Aggregated utilization of all physical resources (CPU, GPU, memory, disk, or etc.) across the cluster. Ignores application variable.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 0,
            "y": 0,
            "w": 12,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 5,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "avg(ray_node_cpu_utilization{neutree_cluster=~\"$Cluster\",})",
              "interval": "",
              "legendFormat": "CPU (physical)",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_gpus_utilization{neutree_cluster=~\"$Cluster\",}) / on() (sum(autoscaler_cluster_resources{resource='GPU',neutree_cluster=~\"$Cluster\",}) or vector(0))",
              "interval": "",
              "legendFormat": "GPU (physical)",
              "queryType": "randomWalk",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_mem_used{neutree_cluster=~\"$Cluster\",}) / on() (sum(ray_node_mem_total{neutree_cluster=~\"$Cluster\",})) * 100",
              "interval": "",
              "legendFormat": "Memory (RAM)",
              "queryType": "randomWalk",
              "refId": "C"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_gram_used{neutree_cluster=~\"$Cluster\",}) / on() (sum(ray_node_gram_available{neutree_cluster=~\"$Cluster\",}) + sum(ray_node_gram_used{neutree_cluster=~\"$Cluster\",})) * 100",
              "interval": "",
              "legendFormat": "GRAM",
              "queryType": "randomWalk",
              "refId": "D"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_object_store_memory{neutree_cluster=~\"$Cluster\",}) / on() sum(ray_resources{Name=\"object_store_memory\",neutree_cluster=~\"$Cluster\",}) * 100",
              "interval": "",
              "legendFormat": "Object Store Memory",
              "queryType": "randomWalk",
              "refId": "E"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_disk_usage{neutree_cluster=~\"$Cluster\",}) / on() (sum(ray_node_disk_free{neutree_cluster=~\"$Cluster\",}) + sum(ray_node_disk_usage{neutree_cluster=~\"$Cluster\",})) * 100",
              "interval": "",
              "legendFormat": "Disk",
              "queryType": "randomWalk",
              "refId": "F"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Cluster Utilization",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "%",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "QPS for each selected application.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 12,
            "y": 0,
            "w": 12,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 7,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_serve_num_http_requests_total{application=~\"$Application\",application!~\"\",route=~\"$HTTP_Route\",route!~\"/-/.*\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, route)",
              "interval": "",
              "legendFormat": "{{application, route}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(rate(ray_serve_num_grpc_requests_total{application=~\"$Application\",application!~\"\",method=~\"$gRPC_Method\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, method)",
              "interval": "",
              "legendFormat": "{{application, method}}",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "QPS per application",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "qps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Error QPS for each selected application.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 0,
            "y": 1,
            "w": 12,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 8,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_serve_num_http_error_requests_total{application=~\"$Application\",application!~\"\",route=~\"$HTTP_Route\",route!~\"/-/.*\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, route)",
              "interval": "",
              "legendFormat": "{{application, route}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(rate(ray_serve_num_grpc_error_requests_total{application=~\"$Application\",application!~\"\",method=~\"$gRPC_Method\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, method)",
              "interval": "",
              "legendFormat": "{{application, method}}",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Error QPS per application",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "qps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Error QPS for each selected application.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 12,
            "y": 1,
            "w": 12,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 17,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_serve_num_http_error_requests_total{application=~\"$Application\",application!~\"\",route=~\"$HTTP_Route\",route!~\"/-/.*\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, route, error_code)",
              "interval": "",
              "legendFormat": "{{application, route, error_code}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(rate(ray_serve_num_grpc_error_requests_total{application=~\"$Application\",application!~\"\",method=~\"$gRPC_Method\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, method, error_code)",
              "interval": "",
              "legendFormat": "{{application, method, error_code}}",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Error QPS per application per error code",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "qps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "P50 latency for selected applications.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 0,
            "y": 2,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 12,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.5, sum(rate(ray_serve_http_request_latency_ms_bucket{application=~\"$Application\",application!~\"\",route=~\"$HTTP_Route\",route!~\"/-/.*\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, route, le))",
              "interval": "",
              "legendFormat": "{{application, route}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.5, sum(rate(ray_serve_grpc_request_latency_ms_bucket{application=~\"$Application\",application!~\"\",method=~\"$gRPC_Method\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, method, le))",
              "interval": "",
              "legendFormat": "{{application, method}}",
              "queryType": "randomWalk",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.5, sum(rate({__name__=~ \"ray_serve_(http|grpc)_request_latency_ms_bucket\",application=~\"$Application\",application!~\"\",neutree_cluster=~\"$Cluster\",}[5m])) by (le))",
              "interval": "",
              "legendFormat": "Total",
              "queryType": "randomWalk",
              "refId": "C"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "P50 latency per application",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "ms",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "P90 latency for selected applications.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 8,
            "y": 2,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 15,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.9, sum(rate(ray_serve_http_request_latency_ms_bucket{application=~\"$Application\",application!~\"\",route=~\"$HTTP_Route\",route!~\"/-/.*\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, route, le))",
              "interval": "",
              "legendFormat": "{{application, route}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.9, sum(rate(ray_serve_grpc_request_latency_ms_bucket{application=~\"$Application\",application!~\"\",method=~\"$gRPC_Method\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, method, le))",
              "interval": "",
              "legendFormat": "{{application, method}}",
              "queryType": "randomWalk",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.9, sum(rate({__name__=~ \"ray_serve_(http|grpc)_request_latency_ms_bucket|ray_serve_grpc_request_latency_ms_bucket\",application=~\"$Application\",application!~\"\",neutree_cluster=~\"$Cluster\",}[5m])) by (le))",
              "interval": "",
              "legendFormat": "Total",
              "queryType": "randomWalk",
              "refId": "C"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "P90 latency per application",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "ms",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "P99 latency for selected applications.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 16,
            "y": 2,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 16,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.99, sum(rate(ray_serve_http_request_latency_ms_bucket{application=~\"$Application\",application!~\"\",route=~\"$HTTP_Route\",route!~\"/-/.*\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, route, le))",
              "interval": "",
              "legendFormat": "{{application, route}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.99, sum(rate(ray_serve_grpc_request_latency_ms_bucket{application=~\"$Application\",application!~\"\",method=~\"$gRPC_Method\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, method, le))",
              "interval": "",
              "legendFormat": "{{application, method}}",
              "queryType": "randomWalk",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.99, sum(rate({__name__=~ \"ray_serve_(http|grpc)_request_latency_ms_bucket|ray_serve_grpc_request_latency_ms_bucket\",application=~\"$Application\",application!~\"\",neutree_cluster=~\"$Cluster\",}[5m])) by (le))",
              "interval": "",
              "legendFormat": "Total",
              "queryType": "randomWalk",
              "refId": "C"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "P99 latency per application",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "ms",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of replicas per deployment. Ignores \"Application\" variable.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 0,
            "y": 3,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 2,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_serve_deployment_replica_healthy{neutree_cluster=~\"$Cluster\",}) by (application, deployment)",
              "interval": "",
              "legendFormat": "{{application, deployment}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Replicas per deployment",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "replicas",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "QPS for each deployment.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 8,
            "y": 3,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 13,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_serve_deployment_request_counter_total{application=~\"$Application\",application!~\"\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, deployment)",
              "interval": "",
              "legendFormat": "{{application, deployment}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "QPS per deployment",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "qps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Error QPS for each deplyoment.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 16,
            "y": 3,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 14,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(rate(ray_serve_deployment_error_counter_total{application=~\"$Application\",application!~\"\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, deployment)",
              "interval": "",
              "legendFormat": "{{application, deployment}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Error QPS per deployment",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "qps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "P50 latency per deployment.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 0,
            "y": 4,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 9,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.5, sum(rate(ray_serve_deployment_processing_latency_ms_bucket{application=~\"$Application\",application!~\"\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, deployment, le))",
              "interval": "",
              "legendFormat": "{{application, deployment}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.5, sum(rate(ray_serve_deployment_processing_latency_ms_bucket{application=~\"$Application\",application!~\"\",neutree_cluster=~\"$Cluster\",}[5m])) by (le))",
              "interval": "",
              "legendFormat": "Total",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "P50 latency per deployment",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "ms",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "P90 latency per deployment.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 8,
            "y": 4,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 10,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.9, sum(rate(ray_serve_deployment_processing_latency_ms_bucket{application=~\"$Application\",application!~\"\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, deployment, le))",
              "interval": "",
              "legendFormat": "{{application, deployment}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.9, sum(rate(ray_serve_deployment_processing_latency_ms_bucket{application=~\"$Application\",application!~\"\",neutree_cluster=~\"$Cluster\",}[5m])) by (le))",
              "interval": "",
              "legendFormat": "Total",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "P90 latency per deployment",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "ms",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "P99 latency per deployment.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 16,
            "y": 4,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 11,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.99, sum(rate(ray_serve_deployment_processing_latency_ms_bucket{application=~\"$Application\",application!~\"\",neutree_cluster=~\"$Cluster\",}[5m])) by (application, deployment, le))",
              "interval": "",
              "legendFormat": "{{application, deployment}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "histogram_quantile(0.99, sum(rate(ray_serve_deployment_processing_latency_ms_bucket{application=~\"$Application\",application!~\"\",neutree_cluster=~\"$Cluster\",}[5m])) by (le))",
              "interval": "",
              "legendFormat": "Total",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "P99 latency per deployment",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "ms",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of requests queued per deployment. Ignores \"Application\" variable.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "x": 0,
            "y": 5,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 3,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_serve_deployment_queued_queries{neutree_cluster=~\"$Cluster\",}) by (application, deployment)",
              "interval": "",
              "legendFormat": "{{application, deployment}}",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Queue size per deployment",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "requests",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Number of nodes in this cluster. Ignores \"Application\" variable.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 8,
            "y": 5,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 4,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(autoscaler_active_nodes{neutree_cluster=~\"$Cluster\",}) by (NodeType)",
              "interval": "",
              "legendFormat": "Active Nodes: {{NodeType}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(autoscaler_recently_failed_nodes{neutree_cluster=~\"$Cluster\",}) by (NodeType)",
              "interval": "",
              "legendFormat": "Failed Nodes: {{NodeType}}",
              "queryType": "randomWalk",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "sum(autoscaler_pending_nodes{neutree_cluster=~\"$Cluster\",}) by (NodeType)",
              "interval": "",
              "legendFormat": "Pending Nodes: {{NodeType}}",
              "queryType": "randomWalk",
              "refId": "C"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Node count",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "nodes",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "Network speed per node. Ignores \"Application\" variable.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "x": 16,
            "y": 5,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 6,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 2,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(ray_node_network_receive_speed{neutree_cluster=~\"$Cluster\",}) by (instance)",
              "interval": "",
              "legendFormat": "Recv: {{instance}}",
              "queryType": "randomWalk",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(ray_node_network_send_speed{neutree_cluster=~\"$Cluster\",}) by (instance)",
              "interval": "",
              "legendFormat": "Send: {{instance}}",
              "queryType": "randomWalk",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Node network",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "Bps",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The number of ongoing requests in the HTTP Proxy.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 0,
            "y": 6,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 20,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "ray_serve_num_ongoing_http_requests{neutree_cluster=~\"$Cluster\",}",
              "interval": "",
              "legendFormat": "Ongoing HTTP Requests",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Ongoing HTTP Requests",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "requests",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The number of ongoing requests in the gRPC Proxy.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 8,
            "y": 6,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 21,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "ray_serve_num_ongoing_grpc_requests{neutree_cluster=~\"$Cluster\",}",
              "interval": "",
              "legendFormat": "Ongoing gRPC Requests",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Ongoing gRPC Requests",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "requests",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The number of request scheduling tasks in the router.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 16,
            "y": 6,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 22,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "ray_serve_num_scheduling_tasks{neutree_cluster=~\"$Cluster\",}",
              "interval": "",
              "legendFormat": "Scheduling Tasks",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Scheduling Tasks",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "tasks",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The number of request scheduling tasks in the router that are undergoing backoff.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 0,
            "y": 7,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 23,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "ray_serve_num_scheduling_tasks_in_backoff{neutree_cluster=~\"$Cluster\",}",
              "interval": "",
              "legendFormat": "Scheduling Tasks in Backoff",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Scheduling Tasks in Backoff",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "tasks",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The duration of the last control loop.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 8,
            "y": 7,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 24,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "ray_serve_controller_control_loop_duration_s{neutree_cluster=~\"$Cluster\",}",
              "interval": "",
              "legendFormat": "Control Loop Duration",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Controller Control Loop Duration",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "seconds",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "${datasource}",
          "description": "The number of control loops performed by the controller. Increases monotonically over the controller's lifetime.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 10,
          "fillGradient": 0,
          "gridPos": {
            "x": 16,
            "y": 7,
            "w": 8,
            "h": 8
          },
          "hiddenSeries": false,
          "id": 25,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "hideEmpty": false,
            "hideZero": true,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.17",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2987",
              "alias": "MAX",
              "dashes": true,
              "color": "#1F60C4",
              "fill": 0,
              "stack": false
            },
            {
              "$$hashKey": "object:78",
              "alias": "/FINISHED|FAILED|DEAD|REMOVED|Failed Nodes:/",
              "hiddenSeries": true
            },
            {
              "$$hashKey": "object:2987",
              "alias": "MAX + PENDING",
              "dashes": true,
              "color": "#777777",
              "fill": 0,
              "stack": false
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "ray_serve_controller_num_control_loops{neutree_cluster=~\"$Cluster\",}",
              "interval": "",
              "legendFormat": "Control Loops",
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Number of Control Loops",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:628",
              "format": "loops",
              "label": "",
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:629",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        }
      ],
      "refresh": false,
      "schemaVersion": 27,
      "style": "dark",
      "tags": [
        "rayVersion:2.46.0"
      ],
      "templating": {
        "list": [
          {
            "current": {
              "selected": false
            },
            "description": "Filter queries of a specific Prometheus type.",
            "hide": 2,
            "includeAll": false,
            "multi": false,
            "name": "datasource",
            "options": [],
            "query": "prometheus",
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "type": "datasource"
          },
          {
            "allValue": ".*",
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": "${datasource}",
            "definition": "label_values(ray_serve_deployment_replica_healthy{}, application)",
            "description": null,
            "error": null,
            "hide": 0,
            "includeAll": true,
            "label": null,
            "multi": true,
            "name": "Application",
            "options": [],
            "query": {
              "query": "label_values(ray_serve_deployment_replica_healthy{}, application)",
              "refId": "Prometheus-Instance-Variable-Query"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          },
          {
            "allValue": ".*",
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": "${datasource}",
            "definition": "label_values(ray_serve_num_http_requests_total{}, route)",
            "description": null,
            "error": null,
            "hide": 0,
            "includeAll": true,
            "label": "HTTP Route",
            "multi": true,
            "name": "HTTP_Route",
            "options": [],
            "query": {
              "query": "label_values(ray_serve_num_http_requests_total{}, route)",
              "refId": "Prometheus-Instance-Variable-Query"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          },
          {
            "allValue": ".*",
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "datasource": "${datasource}",
            "definition": "label_values(ray_serve_num_grpc_requests{}, method)",
            "description": null,
            "error": null,
            "hide": 0,
            "includeAll": true,
            "label": "gRPC Service Method",
            "multi": true,
            "name": "gRPC_Method",
            "options": [],
            "query": {
              "query": "label_values(ray_serve_num_grpc_requests{}, method)",
              "refId": "Prometheus-Instance-Variable-Query"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 0,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          },
          {
            "current": {
              "selected": false
            },
            "datasource": "${datasource}",
            "definition": "label_values(ray_node_network_receive_speed{}, ray_io_cluster)",
            "description": "Filter queries to specific Ray clusters for KubeRay. When ingesting metrics across multiple ray clusters, the ray_io_cluster label should be set per cluster. For KubeRay users, this is done automaticaly with Prometheus PodMonitor.",
            "error": null,
            "hide": 0,
            "includeAll": true,
            "label": null,
            "multi": false,
            "name": "Cluster",
            "options": [],
            "query": {
              "query": "label_values(ray_node_network_receive_speed{}, ray_io_cluster)",
              "refId": "StandardVariableQuery"
            },
            "refresh": 2,
            "regex": "",
            "skipUrlSync": false,
            "sort": 2,
            "tagValuesQuery": "",
            "tags": [],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
          }
        ]
      },
      "rayMeta": [
        "excludesSystemRoutes",
        "supportsGlobalFilterOverride"
      ],
      "time": {
        "from": "now-30m",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Serve Dashboard",
      "uid": "rayServeDashboard",
      "version": 1
    }
  vllm_grafana_dashboard.json: |-
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "grafana",
              "uid": "-- Grafana --"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
              "limit": 100,
              "matchAny": false,
              "tags": [],
              "type": "dashboard"
            },
            "type": "dashboard"
          }
        ]
      },
      "description": "Monitoring vLLM Inference Server",
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "id": 1,
      "links": [],
      "liveNow": false,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_PROMETHEUS}"
          },
          "description": "End to end request latency measured in seconds.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 0
          },
          "id": 9,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(vllm:e2e_request_latency_seconds_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])))",
              "fullMetaSearch": false,
              "includeNullMetadata": false,
              "instant": false,
              "legendFormat": "P99",
              "range": true,
              "refId": "A",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "histogram_quantile(0.95, sum by(le) (rate(vllm:e2e_request_latency_seconds_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])))",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": false,
              "instant": false,
              "legendFormat": "P95",
              "range": true,
              "refId": "B",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "histogram_quantile(0.9, sum by(le) (rate(vllm:e2e_request_latency_seconds_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])))",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": false,
              "instant": false,
              "legendFormat": "P90",
              "range": true,
              "refId": "C",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "histogram_quantile(0.5, sum by(le) (rate(vllm:e2e_request_latency_seconds_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])))",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": false,
              "instant": false,
              "legendFormat": "P50",
              "range": true,
              "refId": "D",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "editorMode": "code",
              "expr": "rate(vllm:e2e_request_latency_seconds_sum{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])\n/\nrate(vllm:e2e_request_latency_seconds_count{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "Average",
              "range": true,
              "refId": "E"
            }
          ],
          "title": "E2E Request Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_PROMETHEUS}"
          },
          "description": "Number of tokens processed per second",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 0
          },
          "id": 8,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "rate(vllm:prompt_tokens_total{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])",
              "fullMetaSearch": false,
              "includeNullMetadata": false,
              "instant": false,
              "legendFormat": "Prompt Tokens/Sec",
              "range": true,
              "refId": "A",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "rate(vllm:generation_tokens_total{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": false,
              "instant": false,
              "legendFormat": "Generation Tokens/Sec",
              "range": true,
              "refId": "B",
              "useBackend": false
            }
          ],
          "title": "Token Throughput",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_PROMETHEUS}"
          },
          "description": "Inter token latency in seconds.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 8
          },
          "id": 10,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(vllm:time_per_output_token_seconds_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])))",
              "fullMetaSearch": false,
              "includeNullMetadata": false,
              "instant": false,
              "legendFormat": "P99",
              "range": true,
              "refId": "A",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "histogram_quantile(0.95, sum by(le) (rate(vllm:time_per_output_token_seconds_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])))",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": false,
              "instant": false,
              "legendFormat": "P95",
              "range": true,
              "refId": "B",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "histogram_quantile(0.9, sum by(le) (rate(vllm:time_per_output_token_seconds_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])))",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": false,
              "instant": false,
              "legendFormat": "P90",
              "range": true,
              "refId": "C",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "histogram_quantile(0.5, sum by(le) (rate(vllm:time_per_output_token_seconds_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])))",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": false,
              "instant": false,
              "legendFormat": "P50",
              "range": true,
              "refId": "D",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "editorMode": "code",
              "expr": "rate(vllm:time_per_output_token_seconds_sum{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])\n/\nrate(vllm:time_per_output_token_seconds_count{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "Mean",
              "range": true,
              "refId": "E"
            }
          ],
          "title": "Time Per Output Token Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_PROMETHEUS}"
          },
          "description": "Number of requests in RUNNING, WAITING, and SWAPPED state",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 8
          },
          "id": 3,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "vllm:num_requests_running{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "Num Running",
              "range": true,
              "refId": "A",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "vllm:num_requests_swapped{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "Num Swapped",
              "range": true,
              "refId": "B",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "vllm:num_requests_waiting{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "Num Waiting",
              "range": true,
              "refId": "C",
              "useBackend": false
            }
          ],
          "title": "Scheduler State",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_PROMETHEUS}"
          },
          "description": "P50, P90, P95, and P99 TTFT latency in seconds.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 16
          },
          "id": 5,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(vllm:time_to_first_token_seconds_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])))",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": false,
              "instant": false,
              "legendFormat": "P99",
              "range": true,
              "refId": "A",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "histogram_quantile(0.95, sum by(le) (rate(vllm:time_to_first_token_seconds_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])))",
              "fullMetaSearch": false,
              "includeNullMetadata": false,
              "instant": false,
              "legendFormat": "P95",
              "range": true,
              "refId": "B",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "histogram_quantile(0.9, sum by(le) (rate(vllm:time_to_first_token_seconds_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])))",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": false,
              "instant": false,
              "legendFormat": "P90",
              "range": true,
              "refId": "C",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "histogram_quantile(0.5, sum by(le) (rate(vllm:time_to_first_token_seconds_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])))",
              "fullMetaSearch": false,
              "hide": false,
              "includeNullMetadata": false,
              "instant": false,
              "legendFormat": "P50",
              "range": true,
              "refId": "D",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "editorMode": "code",
              "expr": "rate(vllm:time_to_first_token_seconds_sum{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])\n/\nrate(vllm:time_to_first_token_seconds_count{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "Average",
              "range": true,
              "refId": "E"
            }
          ],
          "title": "Time To First Token Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_PROMETHEUS}"
          },
          "description": "Percentage of used cache blocks by vLLM.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 16
          },
          "id": 4,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "editorMode": "code",
              "expr": "vllm:gpu_cache_usage_perc{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}",
              "instant": false,
              "legendFormat": "GPU Cache Usage",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "editorMode": "code",
              "expr": "vllm:cpu_cache_usage_perc{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}",
              "hide": false,
              "instant": false,
              "legendFormat": "CPU Cache Usage",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Cache Utilization",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_PROMETHEUS}"
          },
          "description": "Heatmap of request prompt length",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 24
          },
          "id": 12,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "cellValues": {
              "unit": "none"
            },
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "min": 0,
              "mode": "scheme",
              "reverse": false,
              "scale": "exponential",
              "scheme": "Spectral",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-09
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto",
              "value": "Request count"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": true
            },
            "yAxis": {
              "axisLabel": "Prompt Length",
              "axisPlacement": "left",
              "reverse": false,
              "unit": "none"
            }
          },
          "pluginVersion": "11.2.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "sum by(le) (increase(vllm:request_prompt_tokens_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval]))",
              "format": "heatmap",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "{{le}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Request Prompt Length",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_PROMETHEUS}"
          },
          "description": "Heatmap of request generation length",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 24
          },
          "id": 13,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "cellValues": {
              "unit": "none"
            },
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "min": 0,
              "mode": "scheme",
              "reverse": false,
              "scale": "exponential",
              "scheme": "Spectral",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-09
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto",
              "value": "Request count"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": true
            },
            "yAxis": {
              "axisLabel": "Generation Length",
              "axisPlacement": "left",
              "reverse": false,
              "unit": "none"
            }
          },
          "pluginVersion": "11.2.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "sum by(le) (increase(vllm:request_generation_tokens_bucket{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval]))",
              "format": "heatmap",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "{{le}}",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Request Generation Length",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_PROMETHEUS}"
          },
          "description": "Number of finished requests by their finish reason: either an EOS token was generated or the max sequence length was reached.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 32
          },
          "id": 11,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "builder",
              "expr": "sum by(finished_reason) (increase(vllm:request_success_total{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval]))",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "interval": "",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Finish Reason",
          "type": "timeseries"
        },
        {
          "datasource": {
            "default": false,
            "type": "prometheus",
            "uid": "${DS_PROMETHEUS}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "seconds",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 32
          },
          "id": 14,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "code",
              "expr": "rate(vllm:request_queue_time_seconds_sum{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Queue Time",
          "type": "timeseries"
        },
        {
          "datasource": {
            "default": false,
            "type": "prometheus",
            "uid": "${DS_PROMETHEUS}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 40
          },
          "id": 15,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "code",
              "expr": "rate(vllm:request_prefill_time_seconds_sum{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "Prefill",
              "range": true,
              "refId": "A",
              "useBackend": false
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "editorMode": "code",
              "expr": "rate(vllm:request_decode_time_seconds_sum{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "Decode",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Requests Prefill and Decode Time",
          "type": "timeseries"
        },
        {
          "datasource": {
            "default": false,
            "type": "prometheus",
            "uid": "${DS_PROMETHEUS}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 40
          },
          "id": 16,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${DS_PROMETHEUS}"
              },
              "disableTextWrap": false,
              "editorMode": "code",
              "expr": "rate(vllm:request_max_num_generation_tokens_sum{application=~\"$Application\",deployment=~\"$Deployment\",replica=~\"$Replica\",neutree_cluster=~\"$Cluster\"}[$__rate_interval])",
              "fullMetaSearch": false,
              "includeNullMetadata": true,
              "instant": false,
              "legendFormat": "Tokens",
              "range": true,
              "refId": "A",
              "useBackend": false
            }
          ],
          "title": "Max Generation Token in Sequence Group",
          "type": "timeseries"
        }
      ],
      "refresh": "",
      "schemaVersion": 39,
      "tags": [],
      "templating": {
        "list": [
          {
            "current": {
              "selected": false,
              "text": "prometheus",
              "value": "edx8memhpd9tsa"
            },
            "hide": 0,
            "includeAll": false,
            "label": "datasource",
            "multi": false,
            "name": "DS_PROMETHEUS",
            "options": [],
            "query": "prometheus",
            "queryValue": "",
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "type": "datasource"
          },
          {
            "name": "Application",
            "label": "Application",
            "type": "query",
            "hide": 0,
            "refresh": 2,
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS}"
            },
            "definition": "label_values(application)",
            "query": {
              "query": "label_values(application)",
              "refId": "Var-App"
            },
            "multi": true,
            "includeAll": true,
            "allValue": ".*",
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "options": [],
            "regex": "",
            "sort": 0
          },
          {
            "name": "Deployment",
            "label": "Deployment",
            "type": "query",
            "hide": 0,
            "refresh": 2,
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS}"
            },
            "definition": "label_values(deployment)",
            "query": {
              "query": "label_values(deployment)",
              "refId": "Var-Dep"
            },
            "multi": true,
            "includeAll": true,
            "allValue": ".*",
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "options": [],
            "regex": "",
            "sort": 0
          },
          {
            "name": "Replica",
            "label": "Replica",
            "type": "query",
            "hide": 0,
            "refresh": 2,
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS}"
            },
            "definition": "label_values(replica)",
            "query": {
              "query": "label_values(replica)",
              "refId": "Var-Rep"
            },
            "multi": true,
            "includeAll": true,
            "allValue": ".*",
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "options": [],
            "regex": "",
            "sort": 0
          },
          {
            "name": "Cluster",
            "label": "Cluster",
            "type": "query",
            "hide": 0,
            "refresh": 2,
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS}"
            },
            "definition": "label_values(neutree_cluster)",
            "query": {
              "query": "label_values(neutree_cluster)",
              "refId": "Var-Clu"
            },
            "multi": true,
            "includeAll": true,
            "allValue": ".*",
            "current": {
              "selected": true,
              "text": [
                "All"
              ],
              "value": [
                "$__all"
              ]
            },
            "options": [],
            "regex": "",
            "sort": 0
          }
        ]
      },
      "time": {
        "from": "now-5m",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "vLLM",
      "uid": "vllm",
      "version": 8,
      "weekStart": ""
    }
---
# Source: neutree/templates/grafana-datasource-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-datasources
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
data:
  datasources.yaml: |
      apiVersion: 1
      datasources:
      - name: neutree-cluster
        type: prometheus
        url: http://neutree-test-victoria-metrics-cluster-vmselect:8481/select/0/prometheus
        isDefault: true
        jsonData:
          prometheusType: Prometheus
          prometheusVersion: 2.24.0
---
# Source: neutree/templates/kong-plugin-neutree-ai-statistics.yaml
apiVersion: v1
data:
  handler.lua: |-
    local cjson = require("cjson.safe")
    local buffer = require("string.buffer")
    local ai_shared = require("kong.llm.drivers.shared")
    local ai_driver = require("kong.llm.drivers.openai")
    local strip = require("kong.tools.string").strip
  
    local AIStatisticsPluginHandler = {
        PRIORITY = 1000,
        VERSION = "0.0.1",
    }
  
    -- copy from https://github.com/Kong/kong/blob/c415a933fc71865372c0891e7aa5421b10e85901/kong/llm/plugin/shared-filters/normalize-sse-chunk.lua#L25
    -- get the token text from an event frame
    local function get_token_text(event_t)
        -- get: event_t.choices[1]
        local first_choice = ((event_t or EMPTY).choices or EMPTY)[1] or EMPTY
        -- return:
        --   - event_t.choices[1].delta.content
        --   - event_t.choices[1].text
        --   - ""
        local token_text = (first_choice.delta or EMPTY).content or first_choice.text or ""
        return (type(token_text) == "string" and token_text) or ""
    end
  
    local function handle_json_response(conf)
        local response_body = kong.service.response.get_raw_body()
        if response_body == nil then
            -- response body is nil, ignore
            return
        end
  
        local ai_response, err = cjson.decode(response_body)
        if err then
            -- not json format, ignore
            return
        end
  
        kong.ctx.plugin.response_model = ai_response.model
        if ai_response.usage then
            if conf.route_type == "/v1/chat/completions" then
                kong.ctx.plugin.completions_tokens = ai_response.usage.completion_tokens
                kong.ctx.plugin.prompt_tokens = ai_response.usage.prompt_tokens
                kong.ctx.plugin.total_tokens = ai_response.usage.total_tokens
            elseif conf.route_type == "/v1/embeddings" then
                kong.ctx.plugin.prompt_tokens = ai_response.usage.prompt_tokens
                kong.ctx.plugin.total_tokens = ai_response.usage.total_tokens
            elseif conf.route_type == "/v1/rerank" then
                kong.ctx.plugin.prompt_tokens = ai_response.usage.prompt_tokens
                kong.ctx.plugin.total_tokens = ai_response.usage.total_tokens
            end
        end
    end
  
    local function handle_stream_response(conf, chunk, finished)
        local content_type = kong.service.response.get_header("Content-Type")
        local normalized_content_type = content_type and content_type:sub(1, (content_type:find(";") or 0) - 1)
        if normalized_content_type and normalized_content_type ~= "text/event-stream" then
            return true
        end
  
        local body_buffer = kong.ctx.plugin.sse_body_buffer
  
        if type(chunk) == "string" and chunk ~= "" then
            local events = ai_shared.frame_to_events(chunk, normalized_content_type)
            if not events then
                return
            end
  
            local frame_buffer = buffer.new()
            for _, event in ipairs(events) do
                local formatted, _, metadata = ai_driver.from_format(event, "", "stream/llm/v1/chat")
                if formatted and formatted ~= ai_shared._CONST.SSE_TERMINATOR then
                    local event_t, err = cjson.decode(formatted)
                    if not err then
                        if event_t.choices and #event_t.choices > 0 then
                            local token_t = get_token_text(event_t)
                            body_buffer:put(token_t)
                        end
                        if kong.ctx.plugin.response_model == nil and event_t.model then
                            kong.ctx.plugin.response_model = event_t.model
                        end
                        -- some upstream stream api return token usage in the last event, if exist, record it.
                        if event_t.usage then
                            kong.ctx.plugin.prompt_tokens = event_t.usage.prompt_tokens
                            kong.ctx.plugin.completions_tokens = event_t.usage.completion_tokens
                            kong.ctx.plugin.total_tokens = event_t.usage.total_tokens
                        end
                    end
                end
            end
        end
  
        if finished and kong.ctx.plugin.total_tokens == nil and body_buffer ~= nil then
            -- in this, means upstream stream api never return token usage, so we need to calucate it.
            local response = body_buffer:get()
            local completion_tokens_count = math.ceil(#strip(response) / 4)
            kong.ctx.plugin.completions_tokens = completion_tokens_count
            kong.ctx.plugin.total_tokens = kong.ctx.plugin.completions_tokens + kong.ctx.plugin.prompt_tokens
        end
    end
  
    local function fail(code, msg)
        return kong.response.exit(code, msg and { error = { message = msg } } or nil)
    end
  
    function AIStatisticsPluginHandler:access(conf)
        local request_path = kong.request.get_path()
        -- skip request not match route_type
        if not string.match(request_path, conf.route_type.."$") then
            kong.ctx.plugin.skip = true
            return
        end
        local content_type = kong.request.get_header("Content-Type") or "application/json"
        if string.find(content_type, "application/json", nil, true) then
            local request_body = kong.request.get_raw_body()
            if request_body == nil then
                return fail(400, "request body can not be null")
            end
            local ai_request, err = cjson.decode(request_body)
            if err then
                return fail(400, "request body is not json format")
            end
            kong.ctx.plugin.request_model = ai_request.model
            if not ai_request.stream then
                kong.service.request.enable_buffering()
            else
                -- stream mode will may not return token usage, so we need to calucate prompt_tokens and record it.
                local prompt_tokens, err = ai_shared.calculate_cost(ai_request or {}, {}, 1.0)
                if err then
                  kong.log.err("unable to estimate request token cost: ", err)
                  return fail(500)
                end
                kong.ctx.plugin.prompt_tokens = prompt_tokens
            end
        else
            return fail(400, "only support content-type is application/json")
        end
    end
  
    function AIStatisticsPluginHandler:body_filter(conf)
        if kong.ctx.plugin.skip then
            return
        end
  
        local response_status = kong.service.response.get_status()
        if response_status ~= 200 then
            return
        end
  
        handle_stream_response(conf, ngx.arg[1], ngx.arg[2])
    end
  
    function AIStatisticsPluginHandler:header_filter(conf)
        if kong.ctx.plugin.skip then
            return
        end
  
        local response_status = kong.service.response.get_status()
        if response_status ~= 200 then
            return
        end
  
        local content_type = kong.service.response.get_header("Content-Type")
        local normalized_content_type = content_type and content_type:sub(1, (content_type:find(";") or 0) - 1)
        if normalized_content_type and normalized_content_type == "text/event-stream" then
            kong.ctx.plugin.sse_body_buffer = buffer.new()
            return true
        end
  
        handle_json_response(conf)
    end
  
    function AIStatisticsPluginHandler:log(conf)
        if kong.ctx.plugin.skip then
            return
        end
  
        local response_status = kong.service.response.get_status()
        if response_status ~= 200 then
            return
        end
  
        local meta = {
            plugin_id = conf.__plugin_id,
            request_model = kong.ctx.plugin.request_model,
            response_model = kong.ctx.plugin.response_model,
        }
  
        kong.log.set_serialize_value("ai.statistics.meta", meta)
  
        local usage = {
            completion_tokens = kong.ctx.plugin.completions_tokens,
            prompt_tokens = kong.ctx.plugin.prompt_tokens,
            total_tokens = kong.ctx.plugin.total_tokens,
        }
  
        kong.log.set_serialize_value("ai.statistics.usage",usage)
    end
  
    return AIStatisticsPluginHandler
  schema.lua: |-
    local PLUGIN_NAME = "neutree-ai-statistics"
  
    local schema = {
      name = PLUGIN_NAME,
      fields = {
        { config = {
            type = "record",
            fields = {
              {
                route_type = {
                  type = "string",
                  required = true,
                  one_of = {"/v1/chat/completions","/v1/embeddings","/v1/rerank"},
                },
              },
            },
          },
        },
      }
    }
  
    return schema
kind: ConfigMap
metadata:
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
  name: neutree-ai-statistics
---
# Source: neutree/templates/vector-install.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: neutree-test-vector
  labels:
    
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
data:
  vector.yml: |-
    secret:
      jwt_secret:
        type: directory
        path: /etc/vector/cridentials/
    sources:
      kong_logs:
        type: http_server
        address: 0.0.0.0:30122
        encode: json
    transforms:
      parse_kong_logs:
        type: remap
        inputs:
          - kong_logs
        source: >
          . = parse_json!(.message)

          # Access fields with hyphens using proper VRL syntax

          if exists(.ai) && exists(.ai."statistics") && exists(.ai."statistics".usage) {
              # Extract fields one by one
              .extracted_data.request_id = .request.id
              .extracted_data.total_tokens = .ai."statistics".usage.total_tokens
              .extracted_data.prompt_tokens = .ai."statistics".usage.prompt_tokens
              .extracted_data.completion_tokens = .ai."statistics".usage.completion_tokens
              .extracted_data.timestamp = .started_at
              .extracted_data.status = .response.status
              .extracted_data.url_spilt = split!(.request.uri, "/")
              .extracted_data.endpoint_name = .extracted_data.url_spilt[4]  # endpoint name from /workspace/{workspace}/endpoint/{endpoint_name}
              .extracted_data.api_key_id = .consumer.custom_id

              if to_int!(.extracted_data.total_tokens) > 0 {
                  ._has_usage = true
              } else {
                  ._has_usage = false
              }
          } else {
              ._has_usage = false
          }
      filter_usage_logs:
        type: filter
        inputs:
          - parse_kong_logs
        condition: ._has_usage == true
      prepare_postgrest_payload:
        type: remap
        inputs:
          - filter_usage_logs
        source: |
          . = {
              "p_api_key_id": .extracted_data.api_key_id,
              "p_request_id": .extracted_data.request_id,
              "p_usage_amount": .extracted_data.total_tokens,
              "p_endpoint_name": .extracted_data.endpoint_name
          }
    sinks:
      postgrest_rpc:
        type: http
        inputs:
          - prepare_postgrest_payload
        encoding:
          codec: json
        framing:
          method: newline_delimited
        compression: none
        uri: http://neutree-test-api-service:3000/api/v1/rpc/record_api_usage
        method: post
        auth:
          strategy: bearer
          token: "SECRET[jwt_secret.secret]"
        headers:
          content-type: application/json
        batch:
          max_events: 10
          timeout_secs: 1
---
# Source: neutree/templates/vmagent-scrape-configmap.yaml
kind: ConfigMap
apiVersion: v1
metadata:
  name: vmagent-scrape-config
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
---
# Source: neutree/templates/vmagent.yaml
kind: ConfigMap
apiVersion: v1
metadata:
  name: vmagent-config
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
data:
  prometheus.yml: |
    global:
      scrape_interval: 30s # Set the scrape interval to every 30 seconds. Default is every 1 minute.
  
    scrape_configs:
    # Scrape from each Ray node as defined in the service_discovery.json provided by Ray.
    - job_name: 'neutree'
      file_sd_configs:
      - files:
        - '/etc/prometheus/scrape/*.json'
  
    # Ray use applicationName as application label value in metrics.
    # it cause the UI can not show the dashboard correctly.
    # So we use relabeling to change it to "endpointName".
      metric_relabel_configs:
        - source_labels: [application]
          target_label: application_original
          regex: '(.+)'
          replacement: '$1'
        - source_labels: [application]
          regex: '([^_]+)_(.+)'
          target_label: application
          replacement: '$2'
      # Convert ray_vllm: prefix to vllm: prefix
      # ray_vllm:e2e_request_latency_seconds_bucket => vllm:e2e_request_latency_seconds_bucket
        - source_labels: [__name__]
          regex: ray_vllm:(.+)
          target_label: __name__
          replacement: vllm:$1
---
# Source: neutree/charts/grafana/templates/pvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: neutree-test-grafana
  namespace: neutree-test
  labels:
    helm.sh/chart: grafana-8.11.0
    app.kubernetes.io/name: grafana
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "11.5.3"
  finalizers:
    - kubernetes.io/pvc-protection
spec:
  accessModes:
    - "ReadWriteOnce"
  resources:
    requests:
      storage: "1Gi"
---
# Source: neutree/templates/postgresql-volume.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: neutree-test-postgresql-pvc
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  accessModes:
    - "ReadWriteOnce"
  resources:
    requests:
      storage: "40Gi"
---
# Source: neutree/templates/vmagent.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: neutree-test-vmagent-pvc
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  accessModes:
    - "ReadWriteOnce"
  resources:
    requests:
      storage: "1Gi"
---
# Source: neutree/charts/grafana/templates/clusterrole.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    helm.sh/chart: grafana-8.11.0
    app.kubernetes.io/name: grafana
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "11.5.3"
  name: neutree-test-grafana-clusterrole
rules: []
---
# Source: neutree/charts/grafana/templates/clusterrolebinding.yaml
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: neutree-test-grafana-clusterrolebinding
  labels:
    helm.sh/chart: grafana-8.11.0
    app.kubernetes.io/name: grafana
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "11.5.3"
subjects:
  - kind: ServiceAccount
    name: neutree-test-grafana
    namespace: neutree-test
roleRef:
  kind: ClusterRole
  name: neutree-test-grafana-clusterrole
  apiGroup: rbac.authorization.k8s.io
---
# Source: neutree/charts/grafana/templates/role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: neutree-test-grafana
  namespace: neutree-test
  labels:
    helm.sh/chart: grafana-8.11.0
    app.kubernetes.io/name: grafana
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "11.5.3"
rules: []
---
# Source: neutree/templates/neutree-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: neutree-test-role
rules:
  - apiGroups: ["batch"]
    resources: ["jobs"]
    verbs: ["get","list"]
  - apiGroups: [""]
    resources: ["pods"]
    verbs: ["get","list"]
  - apiGroups: [""]
    resources: ["configmaps"]
    verbs: ["*"]
  - apiGroups: [""]
    resources: ["services"]
    verbs: ["get","list"]
---
# Source: neutree/charts/grafana/templates/rolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: neutree-test-grafana
  namespace: neutree-test
  labels:
    helm.sh/chart: grafana-8.11.0
    app.kubernetes.io/name: grafana
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "11.5.3"
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: neutree-test-grafana
subjects:
- kind: ServiceAccount
  name: neutree-test-grafana
  namespace: neutree-test
---
# Source: neutree/templates/neutree-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: neutree-test-rolebinding
subjects:
  - kind: ServiceAccount
    name: neutree-test-sa
    namespace: neutree-test
roleRef:
  kind: Role
  name: neutree-test-role
  apiGroup: rbac.authorization.k8s.io
---
# Source: neutree/charts/grafana/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: neutree-test-grafana
  namespace: neutree-test
  labels:
    helm.sh/chart: grafana-8.11.0
    app.kubernetes.io/name: grafana
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "11.5.3"
spec:
  type: LoadBalancer
  ports:
    - name: service
      port: 80
      protocol: TCP
      targetPort: 3000
  selector:
    app.kubernetes.io/name: grafana
    app.kubernetes.io/instance: neutree-test
---
# Source: neutree/charts/victoria-metrics-cluster/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  labels: 
    app: vminsert
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: victoria-metrics-cluster
    app.kubernetes.io/version: v1.115.0-cluster
    helm.sh/chart: victoria-metrics-cluster-0.20.1
  name: neutree-test-victoria-metrics-cluster-vminsert
  namespace: neutree-test
spec:
  type: LoadBalancer
  ports: 
    - name: http
      port: 8480
      protocol: TCP
      targetPort: http
  selector: 
    app: vminsert
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/name: victoria-metrics-cluster
---
# Source: neutree/charts/victoria-metrics-cluster/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  labels: 
    app: vmselect
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: victoria-metrics-cluster
    app.kubernetes.io/version: v1.115.0-cluster
    helm.sh/chart: victoria-metrics-cluster-0.20.1
  name: neutree-test-victoria-metrics-cluster-vmselect
  namespace: neutree-test
spec:
  type: ClusterIP
  ports: 
    - name: http
      port: 8481
      protocol: TCP
      targetPort: http
  selector: 
    app: vmselect
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/name: victoria-metrics-cluster
---
# Source: neutree/charts/victoria-metrics-cluster/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  labels: 
    app: vmstorage
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: victoria-metrics-cluster
    app.kubernetes.io/version: v1.115.0-cluster
    helm.sh/chart: victoria-metrics-cluster-0.20.1
  name: neutree-test-victoria-metrics-cluster-vmstorage
  namespace: neutree-test
spec:
  type: ClusterIP
  clusterIP: None
  ports: 
    - port: 8482
      targetPort: http
      protocol: TCP
      name: http
    - port: 8401
      targetPort: vmselect
      protocol: TCP
      name: vmselect
    - port: 8400
      targetPort: vminsert
      protocol: TCP
      name: vminsert
  selector: 
    app: vmstorage
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/name: victoria-metrics-cluster
---
# Source: neutree/templates/auth-service.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: neutree-test
  name: neutree-test-auth-service
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 9999
      targetPort: 9999
      protocol: TCP
      name: http
  selector:
    app.kubernetes.io/component: neutree-auth
---
# Source: neutree/templates/kong-install.yaml
apiVersion: v1
kind: Service
metadata:
  name: neutree-test-kong-admin
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
  - name: kong-admin
    port: 8001
    targetPort: 8001
    protocol: TCP
  selector:
    app.kubernetes.io/component: neutree-test-kong
---
# Source: neutree/templates/kong-install.yaml
apiVersion: v1
kind: Service
metadata:
  name: neutree-test-kong-manager
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
  - name: kong-manager
    port: 8002
    targetPort: 8002
    protocol: TCP
  selector:
    app.kubernetes.io/component: neutree-test-kong
---
# Source: neutree/templates/kong-install.yaml
apiVersion: v1
kind: Service
metadata:
  name: neutree-test-kong-proxy
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: LoadBalancer
  ports:
  - name: kong-proxy
    port: 80
    targetPort: 8000
    protocol: TCP
  - name: kong-proxy-tls
    port: 443
    targetPort: 8443
    protocol: TCP
  selector:
    app.kubernetes.io/component: neutree-test-kong
---
# Source: neutree/templates/neutree-api-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: neutree-test-api-service
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 3000
      targetPort: http
      protocol: TCP
      name: http
  selector:
    app.kubernetes.io/component: neutree-api
---
# Source: neutree/templates/neutree-core-server-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: neutree-test-core-server-service
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 3001
      targetPort: server
      protocol: TCP
      name: server
  selector:
    app.kubernetes.io/component: neutree-core
---
# Source: neutree/templates/postgresmeta-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: neutree-test-postgresmeta-service
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 8080
      targetPort: 8080
      protocol: TCP
      name: http
  selector:
    app.kubernetes.io/component: neutree-postgresmeta
---
# Source: neutree/templates/postgresql-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: neutree-test-postgresql-service
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: neutree-postgresql
spec:
  type: ClusterIP
  ports:
    - port: 5432
      targetPort: 5432
      protocol: TCP
      name: http
  selector:
    app.kubernetes.io/component: neutree-postgresql
---
# Source: neutree/templates/postgrest-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: neutree-test-postgrest-service
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 6432
      targetPort: 6432
      protocol: TCP
      name: http
  selector:
    app.kubernetes.io/component: neutree-postgrest
---
# Source: neutree/templates/vector-install.yaml
apiVersion: v1
kind: Service
metadata:
  name: neutree-test-vector
  labels:
    
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  ports:
    - name: aggregator-log
      port: 30122
      protocol: TCP
      targetPort: 30122
  selector:
    app.kubernetes.io/component: neutree-vector
  type: ClusterIP
---
# Source: neutree/charts/grafana/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: neutree-test-grafana
  namespace: neutree-test
  labels:
    helm.sh/chart: grafana-8.11.0
    app.kubernetes.io/name: grafana
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "11.5.3"
spec:
  replicas: 1
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      app.kubernetes.io/name: grafana
      app.kubernetes.io/instance: neutree-test
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        helm.sh/chart: grafana-8.11.0
        app.kubernetes.io/name: grafana
        app.kubernetes.io/instance: neutree-test
        app.kubernetes.io/version: "11.5.3"
      annotations:
        checksum/config: 604acd03d3b43b4554d6047d7720d57bf32cf82038bcaa2fd5c2c31c70061310
        checksum/sc-dashboard-provider-config: e70bf6a851099d385178a76de9757bb0bef8299da6d8443602590e44f05fdf24
        checksum/secret: bed677784356b2af7fb0d87455db21f077853059b594101a4f6532bfbd962a7f
        kubectl.kubernetes.io/default-container: grafana
    spec:
      
      serviceAccountName: neutree-test-grafana
      automountServiceAccountToken: true
      shareProcessNamespace: false
      securityContext:
        fsGroup: 472
        runAsGroup: 472
        runAsNonRoot: true
        runAsUser: 472
      initContainers:
      imagePullSecrets:
        
        - name: my-registry-secret
      enableServiceLinks: true
      containers:
        - name: grafana
          image: "docker.io/grafana/grafana:11.5.3"
          imagePullPolicy: IfNotPresent
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            seccompProfile:
              type: RuntimeDefault
          volumeMounts:
            - name: config
              mountPath: "/etc/grafana/grafana.ini"
              subPath: grafana.ini
            - name: datasources
              mountPath: /etc/grafana/provisioning/datasources
              subPath: 
              readOnly: true
            - name: dashboards
              mountPath: /var/lib/grafana/dashboards
              subPath: 
              readOnly: true
            - name: storage
              mountPath: "/var/lib/grafana"
            - name: config
              mountPath: "/etc/grafana/provisioning/dashboards/dashboardproviders.yaml"
              subPath: "dashboardproviders.yaml"
          ports:
            - name: grafana
              containerPort: 3000
              protocol: TCP
            - name: gossip-tcp
              containerPort: 9094
              protocol: TCP
            - name: gossip-udp
              containerPort: 9094
              protocol: UDP
            - name: profiling
              containerPort: 6060
              protocol: TCP
          env:
            - name: POD_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
            - name: GF_SECURITY_ADMIN_USER
              valueFrom:
                secretKeyRef:
                  name: neutree-test-grafana
                  key: admin-user
            - name: GF_SECURITY_ADMIN_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: neutree-test-grafana
                  key: admin-password
            - name: GF_PATHS_DATA
              value: /var/lib/grafana/
            - name: GF_PATHS_LOGS
              value: /var/log/grafana
            - name: GF_PATHS_PLUGINS
              value: /var/lib/grafana/plugins
            - name: GF_PATHS_PROVISIONING
              value: /etc/grafana/provisioning
          livenessProbe:
            failureThreshold: 10
            httpGet:
              path: /api/health
              port: 3000
            initialDelaySeconds: 60
            timeoutSeconds: 30
          readinessProbe:
            httpGet:
              path: /api/health
              port: 3000
      volumes:
        - name: config
          configMap:
            name: neutree-test-grafana
        - name: datasources
          configMap:
            name: grafana-datasources
        - name: dashboards
          configMap:
            name: grafana-dashboards
        - name: storage
          persistentVolumeClaim:
            claimName: neutree-test-grafana
---
# Source: neutree/charts/victoria-metrics-cluster/templates/vminsert-server.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  labels: 
    app: vminsert
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: victoria-metrics-cluster
    app.kubernetes.io/version: v1.115.0-cluster
    helm.sh/chart: victoria-metrics-cluster-0.20.1
  name: neutree-test-victoria-metrics-cluster-vminsert
  namespace: neutree-test
spec:
  selector:
    matchLabels: 
      app: vminsert
      app.kubernetes.io/instance: neutree-test
      app.kubernetes.io/name: victoria-metrics-cluster
  replicas: 1
  template:
    metadata:
      labels: 
        app: vminsert
        app.kubernetes.io/instance: neutree-test
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: victoria-metrics-cluster
    spec:
      imagePullSecrets: 
        - name: my-registry-secret
      containers:
        - name: vminsert
          image: myregistry.io/victoriametrics/vminsert:v1.115.0-cluster
          imagePullPolicy: IfNotPresent
          args: 
            - --envflag.enable
            - --envflag.prefix=VM_
            - --httpListenAddr=:8480
            - --loggerFormat=json
            - --storageNode=neutree-test-victoria-metrics-cluster-vmstorage-0.neutree-test-victoria-metrics-cluster-vmstorage.neutree-test.svc.cluster.local.:8400
          ports:
            - name: http
              containerPort: 8480
          readinessProbe: 
            failureThreshold: 10
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 5
            timeoutSeconds: 5
          livenessProbe: 
            failureThreshold: 3
            initialDelaySeconds: 5
            periodSeconds: 15
            tcpSocket:
              port: http
            timeoutSeconds: 5
      serviceAccountName: neutree-test-victoria-metrics-cluster
      automountServiceAccountToken: true
      terminationGracePeriodSeconds: 30
---
# Source: neutree/charts/victoria-metrics-cluster/templates/vmselect-server.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: neutree-test-victoria-metrics-cluster-vmselect
  namespace: neutree-test
  labels: 
    app: vmselect
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: victoria-metrics-cluster
    app.kubernetes.io/version: v1.115.0-cluster
    helm.sh/chart: victoria-metrics-cluster-0.20.1
spec:
  strategy: {}
  replicas: 1
  selector:
    matchLabels: 
      app: vmselect
      app.kubernetes.io/instance: neutree-test
      app.kubernetes.io/name: victoria-metrics-cluster
  template:
    metadata:
      labels: 
        app: vmselect
        app.kubernetes.io/instance: neutree-test
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: victoria-metrics-cluster
    spec:
      serviceAccountName: neutree-test-victoria-metrics-cluster
      automountServiceAccountToken: true
      securityContext: 
        {}
      imagePullSecrets: 
        - name: my-registry-secret
      containers:
        - name: vmselect
          securityContext: 
            {}
          image: myregistry.io/victoriametrics/vmselect:v1.115.0-cluster
          imagePullPolicy: IfNotPresent
          args: 
            - --cacheDataPath=/cache
            - --envflag.enable
            - --envflag.prefix=VM_
            - --httpListenAddr=:8481
            - --loggerFormat=json
            - --storageNode=neutree-test-victoria-metrics-cluster-vmstorage-0.neutree-test-victoria-metrics-cluster-vmstorage.neutree-test.svc.cluster.local.:8401
          ports:
            - name: http
              containerPort: 8481
          readinessProbe: 
            failureThreshold: 10
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 5
            timeoutSeconds: 5
          livenessProbe: 
            failureThreshold: 3
            initialDelaySeconds: 5
            periodSeconds: 15
            tcpSocket:
              port: http
            timeoutSeconds: 5
          volumeMounts:
            - mountPath: /cache
              name: cache-volume
            
      terminationGracePeriodSeconds: 60
      volumes:
        - name: cache-volume
          emptyDir: 
            {}
---
# Source: neutree/templates/auth-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: neutree-test
  name: neutree-test-auth
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 
  selector:
    matchLabels:
      app.kubernetes.io/component: neutree-auth
  template:
    metadata:
      labels:
        app.kubernetes.io/component: neutree-auth
    spec:
      imagePullSecrets:
        - name: my-registry-secret
      serviceAccountName: neutree-test-sa
      initContainers:
        - name: wait-postgresql
          image: myregistry.io/groundnuty/k8s-wait-for:v2.0
          imagePullPolicy: IfNotPresent
          args:
            - pod
            - -lapp.kubernetes.io/component=neutree-postgresql
      containers:
        - name: auth
          image: myregistry.io/supabase/gotrue:v2.170.0
          imagePullPolicy: IfNotPresent
          env:
            - name: GOTRUE_MAILER_URLPATHS_CONFIRMATION
              value: "/verify"
            - name: GOTRUE_JWT_SECRET
              value: mDCvM4zSk0ghmpyKhgqWb0g4igcOP0Lp
            - name: GOTRUE_JWT_EXP
              value: "3600"
            - name: GOTRUE_JWT_DEFAULT_GROUP_NAME
              value: "api_user"
            - name: GOTRUE_DB_DRIVER
              value: "postgres"
            - name: DB_NAMESPACE
              value: auth
            - name: GOTRUE_API_HOST
              value: "0.0.0.0"
            - name: PORT
              value: "9999"
            - name: GOTRUE_DISABLE_SIGNUP
              value: "false"
            - name: API_EXTERNAL_URL
              value: "http://localhost:9999"
            - name: GOTRUE_SITE_URL
              value: "http://localhost:9999"
            - name: GOTRUE_MAILER_AUTOCONFIRM
              value: "true"
            - name: GOTRUE_LOG_LEVEL
              value: "INFO"
            - name: DATABASE_URL
              value: postgres://auth_admin:auth_admin_password@neutree-test-postgresql-service:5432/neutree?sslmode=disable
            - name: GOTRUE_COOKIE_KEY
              value: neutree
          readinessProbe:
            exec:
              command:
                - "sh"
                - "-c"
                - "wget -q -O /dev/null http://localhost:9999/health || exit 1"
            initialDelaySeconds: 5
            periodSeconds: 2
            timeoutSeconds: 15
            failureThreshold: 10
          ports:
            - name: http
              containerPort: 9999
              protocol: TCP
          resources:
            requests:
              cpu: 100m
              memory: 128Mi
---
# Source: neutree/templates/kong-install.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: neutree-test-kong
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      app.kubernetes.io/component: neutree-test-kong
  template:
    metadata:
      labels:
        app.kubernetes.io/component: neutree-test-kong
    spec:
      imagePullSecrets:
        - name: my-registry-secret
      serviceAccountName: neutree-test-sa
      initContainers:
      - name: clear-stale-pid
        image: myregistry.io/kong/kong:3.9
        imagePullPolicy: IfNotPresent
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsGroup: 1000
          runAsNonRoot: true
          runAsUser: 1000
          seccompProfile:
            type: RuntimeDefault
        resources:
          {}
        command:
        - "rm"
        - "-vrf"
        - "$KONG_PREFIX/pids"
        env:
        - name: KONG_ADMIN_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_ADMIN_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ADMIN_GUI_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_ADMIN_GUI_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ADMIN_LISTEN
          value: "0.0.0.0:8001, [::]:8001"
        - name: KONG_CLUSTER_LISTEN
          value: "off"
        - name: KONG_DATABASE
          value: "postgres"
        - name: KONG_LUA_PACKAGE_PATH
          value: "/opt/?.lua;/opt/?/init.lua;;"
        - name: KONG_NGINX_WORKER_PROCESSES
          value: "2"
        - name: KONG_PG_DATABASE
          value: "neutree"
        - name: KONG_PG_HOST
          value: "neutree-test-postgresql-service"
        - name: KONG_PG_PASSWORD
          value: "kong_admin_password"
        - name: KONG_PG_PORT
          value: "5432"
        - name: KONG_PG_SCHEMA
          value: "kong"
        - name: KONG_PG_USER
          value: "kong_admin"
        - name: KONG_PORTAL_API_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_PORTAL_API_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_PORT_MAPS
          value: "80:8000, 443:8443"
        - name: KONG_PREFIX
          value: "/kong_prefix/"
        - name: KONG_PROXY_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_PROXY_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_PROXY_LISTEN
          value: "0.0.0.0:8000, [::]:8000, 0.0.0.0:8443 http2 ssl, [::]:8443 http2 ssl"
        - name: KONG_PROXY_STREAM_ACCESS_LOG
          value: "/dev/stdout basic"
        - name: KONG_PROXY_STREAM_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ROUTER_FLAVOR
          value: "traditional"
        - name: KONG_STATUS_ACCESS_LOG
          value: "off"
        - name: KONG_STATUS_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_STATUS_LISTEN
          value: "0.0.0.0:8100, [::]:8100"
        - name: KONG_STREAM_LISTEN
          value: "off"
        volumeMounts:
        - name: kong-kong-prefix-dir
          mountPath: /kong_prefix/
        - name: kong-kong-tmp
          mountPath: /tmp
      - name: wait-for-db
        image: myregistry.io/kong/kong:3.9
        imagePullPolicy: IfNotPresent
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsGroup: 1000
          runAsNonRoot: true
          runAsUser: 1000
          seccompProfile:
            type: RuntimeDefault
        env:
        - name: KONG_ADMIN_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_ADMIN_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ADMIN_GUI_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_ADMIN_GUI_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ADMIN_LISTEN
          value: "0.0.0.0:8001, [::]:8001"
        - name: KONG_CLUSTER_LISTEN
          value: "off"
        - name: KONG_DATABASE
          value: "postgres"
        - name: KONG_LUA_PACKAGE_PATH
          value: "/opt/?.lua;/opt/?/init.lua;;"
        - name: KONG_NGINX_WORKER_PROCESSES
          value: "2"
        - name: KONG_PG_DATABASE
          value: "neutree"
        - name: KONG_PG_HOST
          value: "neutree-test-postgresql-service"
        - name: KONG_PG_PASSWORD
          value: "kong_admin_password"
        - name: KONG_PG_PORT
          value: "5432"
        - name: KONG_PG_SCHEMA
          value: "kong"
        - name: KONG_PG_USER
          value: "kong_admin"
        - name: KONG_PORTAL_API_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_PORTAL_API_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_PORT_MAPS
          value: "80:8000, 443:8443"
        - name: KONG_PREFIX
          value: "/kong_prefix/"
        - name: KONG_PROXY_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_PROXY_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_PROXY_LISTEN
          value: "0.0.0.0:8000, [::]:8000, 0.0.0.0:8443 http2 ssl, [::]:8443 http2 ssl"
        - name: KONG_PROXY_STREAM_ACCESS_LOG
          value: "/dev/stdout basic"
        - name: KONG_PROXY_STREAM_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ROUTER_FLAVOR
          value: "traditional"
        - name: KONG_STATUS_ACCESS_LOG
          value: "off"
        - name: KONG_STATUS_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_STATUS_LISTEN
          value: "0.0.0.0:8100, [::]:8100"
        - name: KONG_STREAM_LISTEN
          value: "off"
        - name: LUA_PATH
          value: "/neutree-kong-plugin/?.lua;;"
        - name: KONG_PLUGINS
          value: "bundled,neutree-ai-statistics"
        args: [ "/bin/bash", "-c", "export KONG_NGINX_DAEMON=on KONG_PREFIX=`mktemp -d` KONG_KEYRING_ENABLED=off; until kong start; do echo 'waiting for db'; sleep 1; done; kong stop"]
        volumeMounts:
          - name: kong-kong-prefix-dir
            mountPath: /kong_prefix/
          - name: kong-kong-tmp
            mountPath: /tmp
          - name: neutree-ai-statistics
            mountPath: /neutree-kong-plugin/kong/plugins/neutree-ai-statistics
        resources:
          {}
      containers:
      - name: "proxy"
        image: myregistry.io/kong/kong:3.9
        imagePullPolicy: IfNotPresent
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsGroup: 1000
          runAsNonRoot: true
          runAsUser: 1000
          seccompProfile:
            type: RuntimeDefault
        env:
        - name: KONG_NGINX_HTTP_CLIENT_BODY_BUFFER_SIZE
          value: "20m"
        - name: KONG_ADMIN_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_ADMIN_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ADMIN_GUI_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_ADMIN_GUI_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ADMIN_LISTEN
          value: "0.0.0.0:8001, [::]:8001"
        - name: KONG_CLUSTER_LISTEN
          value: "off"
        - name: KONG_DATABASE
          value: "postgres"
        - name: KONG_LUA_PACKAGE_PATH
          value: "/opt/?.lua;/opt/?/init.lua;;"
        - name: KONG_NGINX_WORKER_PROCESSES
          value: "2"
        - name: KONG_PG_DATABASE
          value: "neutree"
        - name: KONG_PG_HOST
          value: "neutree-test-postgresql-service"
        - name: KONG_PG_PASSWORD
          value: "kong_admin_password"
        - name: KONG_PG_PORT
          value: "5432"
        - name: KONG_PG_SCHEMA
          value: "kong"
        - name: KONG_PG_USER
          value: "kong_admin"
        - name: KONG_PORTAL_API_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_PORTAL_API_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_PORT_MAPS
          value: "80:8000, 443:8443"
        - name: KONG_PREFIX
          value: "/kong_prefix/"
        - name: KONG_PROXY_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_PROXY_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_PROXY_LISTEN
          value: "0.0.0.0:8000, [::]:8000, 0.0.0.0:8443 http2 ssl, [::]:8443 http2 ssl"
        - name: KONG_PROXY_STREAM_ACCESS_LOG
          value: "/dev/stdout basic"
        - name: KONG_PROXY_STREAM_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ROUTER_FLAVOR
          value: "traditional"
        - name: KONG_STATUS_ACCESS_LOG
          value: "off"
        - name: KONG_STATUS_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_STATUS_LISTEN
          value: "0.0.0.0:8100, [::]:8100"
        - name: KONG_STREAM_LISTEN
          value: "off"
        - name: LUA_PATH
          value: "/neutree-kong-plugin/?.lua;;"
        - name: KONG_PLUGINS
          value: "bundled,neutree-ai-statistics"
        lifecycle:
          preStop:
            exec:
              command:
              - kong
              - quit
              - --wait=15
        ports:
        - name: admin
          containerPort: 8001
          protocol: TCP
        - name: proxy
          containerPort: 8000
          protocol: TCP
        - name: proxy-tls
          containerPort: 8443
          protocol: TCP
        - name: status
          containerPort: 8100
          protocol: TCP
        volumeMounts:
          - name: kong-kong-prefix-dir
            mountPath: /kong_prefix/
          - name: kong-kong-tmp
            mountPath: /tmp
          - name: neutree-ai-statistics
            mountPath: /neutree-kong-plugin/kong/plugins/neutree-ai-statistics
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status
            port: status
            scheme: HTTP
          initialDelaySeconds: 5
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status
            port: status
            scheme: HTTP
          initialDelaySeconds: 5
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        resources:
            requests:
              cpu: 100m
              memory: 128Mi
      securityContext:
        seccompProfile:
          type: RuntimeDefault
      terminationGracePeriodSeconds: 30
      volumes:
        - name: kong-kong-prefix-dir
          emptyDir:
            sizeLimit: 256Mi
        - name: kong-kong-tmp
          emptyDir:
            sizeLimit: 1Gi
        - name: neutree-ai-statistics
          configMap:
            name: neutree-ai-statistics
---
# Source: neutree/templates/neutree-api-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: neutree-test-api
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: neutree-api
  template:
    metadata:
      labels:
        app.kubernetes.io/component: neutree-api
    spec:
      serviceAccountName: neutree-test-sa
      imagePullSecrets:
        - name: my-registry-secret
      containers:
        - name: neutree-api
          env:
            - name: NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
          args:
            - --storage-access-url=http://neutree-test-postgrest-service:6432
            - --storage-jwt-secret=mDCvM4zSk0ghmpyKhgqWb0g4igcOP0Lp
            - --host=0.0.0.0
            - --port=3000
            - --static-dir=./public
            - --gin-mode=release
            - --auth-endpoint=http://neutree-test-auth-service:9999
            - --grafana-url=http://neutree-test-grafana:80
            - --version=v0.1.0
            - --deploy-type=kubernetes
          image: myregistry.io/neutree/neutree-api:v0.1.0
          imagePullPolicy: IfNotPresent
          securityContext:
            privileged: true
            capabilities:
              add: ["SYS_ADMIN"]
            allowPrivilegeEscalation: true
          ports:
            - name: http
              containerPort: 3000
              protocol: TCP
          resources:
            requests:
              cpu: 100m
              memory: 128Mi
---
# Source: neutree/templates/neutree-core-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: neutree-test-core
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: neutree-core
  template:
    metadata:
      labels:
        app.kubernetes.io/component: neutree-core
    spec:
      imagePullSecrets:
        - name: my-registry-secret
      serviceAccountName: neutree-test-sa
      containers:
        - name: neutree-core
          env:
            - name: NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
          args:
            - --storage-access-url=http://neutree-test-postgrest-service:6432
            - --storage-jwt-secret=mDCvM4zSk0ghmpyKhgqWb0g4igcOP0Lp
            - --controller-workers=5
            - --default-cluster-version=v15
            - --metrics-remote-write-url=http://neutree-test-victoria-metrics-cluster-vminsert:8480/insert/0/prometheus/
            - --kubernetes-metrics-collect-configmap=vmagent-scrape-config
            - --kubernetes-collect-config-namespace=neutree-test
            - --deploy-type=kubernetes
            - --gateway-type=kong
            - --gateway-proxy-url=http://neutree-test-kong-proxy:80
            - --gateway-admin-url=http://neutree-test-kong-admin:8001
            - --gateway-log-remote-write-url=http://neutree-test-vector:30122
            - --auth-endpoint=http://neutree-test-auth-service:9999
          image: myregistry.io/neutree/neutree-core:v0.1.0
          imagePullPolicy: IfNotPresent
          securityContext:
            privileged: true
            capabilities:
              add: ["SYS_ADMIN"]
            allowPrivilegeEscalation: true
          resources:
            requests:
              cpu: 100m
              memory: 128Mi
          ports:
            - containerPort: 3001
              name: server
              protocol: TCP
---
# Source: neutree/templates/postgresmeta-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: neutree-test-postgresmeta
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 
  selector:
    matchLabels:
      app.kubernetes.io/component: neutree-postgresmeta
  template:
    metadata:
      labels:
        app.kubernetes.io/component: neutree-postgresmeta
    spec:
      imagePullSecrets:
        - name: my-registry-secret
      containers:
        - name: neutree-postgresmeta
          image: myregistry.io/supabase/postgres-meta:v0.86.0
          imagePullPolicy: IfNotPresent
          env:
            - name: PG_META_HOST
              value: "0.0.0.0"
            - name: PG_META_PORT
              value: "8080"
            - name: PG_META_DB_HOST
              value: neutree-test-postgresql-service
            - name: PG_META_DB_PORT
              value: "5432"
            - name: PG_META_DB_NAME
              value: neutree
            - name: PG_META_DB_USER
              value: postgres
            - name: PG_META_DB_PASSWORD
              value: pgpassword
          ports:
            - name: http
              containerPort: 8080
              protocol: TCP
          resources:
            requests:
              cpu: 100m
              memory: 128Mi
---
# Source: neutree/templates/postgresql-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: neutree-test-postgresql
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  strategy:
    type: Recreate
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: neutree-postgresql
  template:
    metadata:
      labels:
        app.kubernetes.io/component: neutree-postgresql
    spec:
      imagePullSecrets:
        - name: my-registry-secret
      initContainers:
        - name: copy-init-sql
          image: myregistry.io/neutree/neutree-db-scripts:v0.1.0
          imagePullPolicy: IfNotPresent
          command: ["/bin/sh", "-c"]
          args:
            - "cp -r /db/init-scripts/* /docker-entrypoint-initdb.d/"
          volumeMounts:
            - name: postgresql-initdb
              mountPath: /docker-entrypoint-initdb.d
      containers:
        - name: neutree-postgresql
          env:
            - name: POSTGRES_DB
              value: neutree
            - name: POSTGRES_USER
              value: postgres
            - name: POSTGRES_PASSWORD
              value: pgpassword
          image: myregistry.io/postgres:13
          imagePullPolicy: IfNotPresent
          ports:
            - name: http
              containerPort: 5432
              protocol: TCP
          readinessProbe:
            exec:
              command:
                - pg_isready
                - -U
                - postgres
            initialDelaySeconds: 10
            periodSeconds: 2
            timeoutSeconds: 15
            failureThreshold: 10
          resources:
            limits:
              cpu: 2
              memory: 2Gi
            requests:
              cpu: 100m
              memory: 128Mi
          volumeMounts:
            - name: postgresql-data
              mountPath: /var/lib/postgresql/data
              subPath: postgres-data
            - name: postgresql-initdb
              mountPath: /docker-entrypoint-initdb.d
      volumes:
        - name: postgresql-data
          persistentVolumeClaim:
            claimName: neutree-test-postgresql-pvc
        - name: postgresql-initdb
          emptyDir: {}
---
# Source: neutree/templates/postgrest-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: neutree-test-postgrest
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 
  selector:
    matchLabels:
      app.kubernetes.io/component: neutree-postgrest
  template:
    metadata:
      labels:
        app.kubernetes.io/component: neutree-postgrest
    spec:
      imagePullSecrets:
        - name: my-registry-secret
      serviceAccountName:  neutree-test-sa
      containers:
        - name: postgrest
          image: myregistry.io/postgrest/postgrest:v14.0
          imagePullPolicy: IfNotPresent
          env:
            - name: PGRST_DB_URI
              value: postgres://postgres:pgpassword@neutree-test-postgresql-service:5432/neutree
            - name: PGRST_DB_SCHEMA
              value: api
            - name: PGRST_SERVER_HOST
              value: "0.0.0.0"
            - name: PGRST_SERVER_PORT
              value: "6432"
            - name: PGRST_JWT_SECRET
              value: "mDCvM4zSk0ghmpyKhgqWb0g4igcOP0Lp"
            - name: PGRST_APP_SETTINGS_JWT_SECRET
              value: "mDCvM4zSk0ghmpyKhgqWb0g4igcOP0Lp"
            - name: PGRST_DB_EXTRA_SEARCH_PATH
              value: "auth"
            - name: PGRST_DB_AGGREGATES_ENABLED
              value: "1"
            - name: PGRST_DB_ANON_ROLE
              value: "anonymous"
          ports:
            - name: http
              containerPort: 6432
              protocol: TCP
          resources:
            requests:
              cpu: 100m
              memory: 128Mi
---
# Source: neutree/templates/vector-install.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: neutree-test-vector
  labels:
    
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: neutree-vector
  minReadySeconds: 0
  template:
    metadata:
      labels:
        app.kubernetes.io/component: neutree-vector
    spec:
      serviceAccountName: neutree-test-sa
      initContainers:
        - name: init-jwt-secret
          image: myregistry.io/bitnamilegacy/jwt-cli:6.2.0-debian-12-r16
          imagePullPolicy: IfNotPresent
          args:
            - encode
            - --secret
            - $(JWT_SECRET)
            - --out
            - /etc/vector/cridentials/secret
            - '{"role":"service_role"}'
          env:
            - name: JWT_SECRET
              value: mDCvM4zSk0ghmpyKhgqWb0g4igcOP0Lp
          volumeMounts:
            - name: jwt-secret
              mountPath: "/etc/vector/cridentials/"
      containers:
        - name: vector
          image: myregistry.io/timberio/vector:0.47.0-debian
          imagePullPolicy: 
          args:
            - --config-dir
            - /etc/vector/
          env:
            - name: VECTOR_LOG
              value: "info"
          ports:
            - name: aggregator-log
              containerPort: 30122
              protocol: TCP
              containerPort: 30122
          resources:
            requests:
              cpu: 100m
              memory: 128Mi
          volumeMounts:
            - name: jwt-secret
              mountPath: "/etc/vector/cridentials/"
            - name: data
              mountPath: "/vector-data-dir"
            - name: config
              mountPath: "/etc/vector/"
              readOnly: true
      terminationGracePeriodSeconds: 60
      volumes:
        - name: jwt-secret
          emptyDir: {}
        - name: data
          emptyDir: {}
        - name: config
          projected:
            sources:
              - configMap:
                  name: neutree-test-vector
---
# Source: neutree/templates/vmagent.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: neutree-test-vmagent
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  strategy:
    type: Recreate
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: neutree-vmagent
  template:
    metadata:
      labels:
        app.kubernetes.io/component: neutree-vmagent
    spec:
      imagePullSecrets:
        - name: my-registry-secret
      containers:
        - name: neutree-vmagent
          args:
            - "--promscrape.config=/etc/prometheus/prometheus.yml"
            - "--promscrape.configCheckInterval=10s"
            - "--remoteWrite.url=http://neutree-test-victoria-metrics-cluster-vminsert:8480/insert/0/prometheus/"
          image: myregistry.io/victoriametrics/vmagent:v1.115.0
          imagePullPolicy: IfNotPresent
          ports:
            - name: http
              containerPort: 8429
              protocol: TCP
          resources:
            requests:
              cpu: 100m
              memory: 128Mi
          volumeMounts:
            - name: vmagent-config
              mountPath: /etc/prometheus
            - name: vmagentdata
              mountPath: /vmagentdata
            - name: vmagent-scrape-config
              mountPath: /etc/prometheus/scrape
      volumes:
        - name: vmagentdata
          persistentVolumeClaim:
            claimName: neutree-test-vmagent-pvc
        - name: vmagent-scrape-config
          configMap:
            name: vmagent-scrape-config
        - name: vmagent-config
          configMap:
            name: vmagent-config
            items:
              - key: prometheus.yml
                path: prometheus.yml
---
# Source: neutree/charts/victoria-metrics-cluster/templates/vmstorage-server.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  labels: 
    app: vmstorage
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: victoria-metrics-cluster
    app.kubernetes.io/version: v1.115.0-cluster
    helm.sh/chart: victoria-metrics-cluster-0.20.1
  name: neutree-test-victoria-metrics-cluster-vmstorage
  namespace: neutree-test
spec:
  serviceName: neutree-test-victoria-metrics-cluster-vmstorage
  selector:
    matchLabels: 
      app: vmstorage
      app.kubernetes.io/instance: neutree-test
      app.kubernetes.io/name: victoria-metrics-cluster
  replicas: 1
  podManagementPolicy: OrderedReady
  template:
    metadata:
      labels: 
        app: vmstorage
        app.kubernetes.io/instance: neutree-test
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: victoria-metrics-cluster
    spec:
      imagePullSecrets: 
        - name: my-registry-secret
      containers:
        - name: vmstorage
          image: myregistry.io/victoriametrics/vmstorage:v1.115.0-cluster
          imagePullPolicy: IfNotPresent
          args: 
            - --envflag.enable
            - --envflag.prefix=VM_
            - --httpListenAddr=:8482
            - --loggerFormat=json
            - --retentionPeriod=1
            - --storageDataPath=/storage
          ports:
            - name: http
              containerPort: 8482
            - name: vminsert
              containerPort: 8400
            - name: vmselect
              containerPort: 8401
          readinessProbe: 
            failureThreshold: 10
            httpGet:
              path: /health
              port: http
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 5
            timeoutSeconds: 5
          volumeMounts:
            - name: vmstorage-volume
              mountPath: /storage
            
      serviceAccountName: neutree-test-victoria-metrics-cluster
      automountServiceAccountToken: true
      terminationGracePeriodSeconds: 60
  minReadySeconds: 5
  volumeClaimTemplates:
    - apiVersion: v1
      kind: PersistentVolumeClaim
      metadata:
        name: vmstorage-volume
      spec:
        accessModes: 
          - ReadWriteOnce
        resources:
          requests:
            storage: 40Gi
---
# Source: neutree/templates/kong-install.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: neutree-test-kong-post-upgrade-migrations-1
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  parallelism: 1
  completions: 1
  backoffLimit: 20
  template:
    metadata:
      name: kong-post-upgrade-migrations
      labels:
        app.kubernetes.io/component: kong-post-upgrade-migrations
    spec:
      imagePullSecrets:
        - name: my-registry-secret
      serviceAccountName: neutree-test-sa
      initContainers:
        - name: wait-postgresql
          image: myregistry.io/groundnuty/k8s-wait-for:v2.0
          imagePullPolicy: IfNotPresent
          args:
            - pod
            - -lapp.kubernetes.io/component=neutree-postgresql
        - name: wait-migration-job
          image: myregistry.io/groundnuty/k8s-wait-for:v2.0
          imagePullPolicy: IfNotPresent
          args:
            - job
            - neutree-test-migration-job-1
            - -n
            - neutree-test
      containers:
      - name: kong-post-upgrade-migrations
        image: myregistry.io/kong/kong:3.9
        imagePullPolicy: IfNotPresent
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsGroup: 1000
          runAsNonRoot: true
          runAsUser: 1000
          seccompProfile:
            type: RuntimeDefault
        env:
        - name: KONG_ADMIN_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_ADMIN_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ADMIN_GUI_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_ADMIN_GUI_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ADMIN_LISTEN
          value: "0.0.0.0:8001, [::]:8001"
        - name: KONG_CLUSTER_LISTEN
          value: "off"
        - name: KONG_DATABASE
          value: "postgres"
        - name: KONG_LUA_PACKAGE_PATH
          value: "/opt/?.lua;/opt/?/init.lua;;"
        - name: KONG_NGINX_WORKER_PROCESSES
          value: "2"
        - name: KONG_PG_DATABASE
          value: "neutree"
        - name: KONG_PG_HOST
          value: "neutree-test-postgresql-service"
        - name: KONG_PG_PASSWORD
          value: "kong_admin_password"
        - name: KONG_PG_PORT
          value: "5432"
        - name: KONG_PG_SCHEMA
          value: "kong"
        - name: KONG_PG_USER
          value: "kong_admin"
        - name: KONG_PORTAL_API_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_PORTAL_API_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_PORT_MAPS
          value: "80:8000, 443:8443"
        - name: KONG_PREFIX
          value: "/kong_prefix/"
        - name: KONG_PROXY_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_PROXY_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_PROXY_LISTEN
          value: "0.0.0.0:8000, [::]:8000, 0.0.0.0:8443 http2 ssl, [::]:8443 http2 ssl"
        - name: KONG_PROXY_STREAM_ACCESS_LOG
          value: "/dev/stdout basic"
        - name: KONG_PROXY_STREAM_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ROUTER_FLAVOR
          value: "traditional"
        - name: KONG_STATUS_ACCESS_LOG
          value: "off"
        - name: KONG_STATUS_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_STATUS_LISTEN
          value: "0.0.0.0:8100, [::]:8100"
        - name: KONG_STREAM_LISTEN
          value: "off"
        - name: KONG_NGINX_DAEMON
          value: "off"
        args: [ "kong", "migrations", "finish" ]
        volumeMounts:
        - name: kong-prefix-dir
          mountPath: /kong_prefix/
        - name: kong-tmp
          mountPath: /tmp
      securityContext:
        seccompProfile:
          type: RuntimeDefault
      restartPolicy: OnFailure
      volumes:
      - name: kong-prefix-dir
        emptyDir:
          sizeLimit: 256Mi
      - name: kong-tmp
        emptyDir:
          sizeLimit: 1Gi
      - name: kong-kong-token
---
# Source: neutree/templates/kong-install.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: neutree-test-kong-pre-upgrade-migrations-1
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  backoffLimit:
  template:
    metadata:
      labels:
        app.kubernetes.io/component: kong-pre-upgrade-migrations
    spec:
      imagePullSecrets:
        - name: my-registry-secret
      serviceAccountName: neutree-test-sa
      initContainers:
        - name: wait-postgresql
          image: myregistry.io/groundnuty/k8s-wait-for:v2.0
          imagePullPolicy: IfNotPresent
          args:
            - pod
            - -lapp.kubernetes.io/component=neutree-postgresql
        - name: wait-migration-job
          image: myregistry.io/groundnuty/k8s-wait-for:v2.0
          imagePullPolicy: IfNotPresent
          args:
            - job
            - neutree-test-migration-job-1
            - -n
            - neutree-test
      containers:
      - name: kong-upgrade-migrations
        image: myregistry.io/kong/kong:3.9
        imagePullPolicy: IfNotPresent
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsGroup: 1000
          runAsNonRoot: true
          runAsUser: 1000
          seccompProfile:
            type: RuntimeDefault
        env:
        env:
        - name: KONG_ADMIN_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_ADMIN_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ADMIN_GUI_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_ADMIN_GUI_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ADMIN_LISTEN
          value: "0.0.0.0:8001, [::]:8001"
        - name: KONG_CLUSTER_LISTEN
          value: "off"
        - name: KONG_DATABASE
          value: "postgres"
        - name: KONG_LUA_PACKAGE_PATH
          value: "/opt/?.lua;/opt/?/init.lua;;"
        - name: KONG_NGINX_WORKER_PROCESSES
          value: "2"
        - name: KONG_PG_DATABASE
          value: "neutree"
        - name: KONG_PG_HOST
          value: "neutree-test-postgresql-service"
        - name: KONG_PG_PASSWORD
          value: "kong_admin_password"
        - name: KONG_PG_PORT
          value: "5432"
        - name: KONG_PG_SCHEMA
          value: "kong"
        - name: KONG_PG_USER
          value: "kong_admin"
        - name: KONG_PORTAL_API_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_PORTAL_API_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_PORT_MAPS
          value: "80:8000, 443:8443"
        - name: KONG_PREFIX
          value: "/kong_prefix/"
        - name: KONG_PROXY_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_PROXY_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_PROXY_LISTEN
          value: "0.0.0.0:8000, [::]:8000, 0.0.0.0:8443 http2 ssl, [::]:8443 http2 ssl"
        - name: KONG_PROXY_STREAM_ACCESS_LOG
          value: "/dev/stdout basic"
        - name: KONG_PROXY_STREAM_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ROUTER_FLAVOR
          value: "traditional"
        - name: KONG_STATUS_ACCESS_LOG
          value: "off"
        - name: KONG_STATUS_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_STATUS_LISTEN
          value: "0.0.0.0:8100, [::]:8100"
        - name: KONG_STREAM_LISTEN
          value: "off"
        - name: KONG_NGINX_DAEMON
          value: "off"
        args: [ "kong", "migrations", "up" ]
        volumeMounts:
        - name: kong-prefix-dir
          mountPath: /kong_prefix/
        - name: kong-tmp
          mountPath: /tmp
        resources:
          {}
      securityContext:
        seccompProfile:
          type: RuntimeDefault
      restartPolicy: OnFailure
      volumes:
      - name: kong-prefix-dir
        emptyDir:
          sizeLimit: 256Mi
      - name: kong-tmp
        emptyDir:
          sizeLimit: 1Gi
---
# Source: neutree/templates/kong-install.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: neutree-test-kong-init-migrations-1
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  parallelism: 1
  completions: 1
  backoffLimit: 20
  template:
    metadata:
      name: kong-init-migrations
      labels:
        app.kubernetes.io/component: kong-init-migrations
    spec:
      serviceAccountName: neutree-test-sa
      initContainers:
        - name: wait-postgresql
          image: myregistry.io/groundnuty/k8s-wait-for:v2.0
          imagePullPolicy: IfNotPresent
          args:
            - pod
            - -lapp.kubernetes.io/component=neutree-postgresql
        - name: wait-migration-job
          image: myregistry.io/groundnuty/k8s-wait-for:v2.0
          imagePullPolicy: IfNotPresent
          args:
            - job
            - neutree-test-migration-job-1
            - -n
            - neutree-test
      containers:
      - name: kong-migrations
        image: myregistry.io/kong/kong:3.9
        imagePullPolicy: IfNotPresent
        securityContext:

          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsGroup: 1000
          runAsNonRoot: true
          runAsUser: 1000
          seccompProfile:
            type: RuntimeDefault
        env:
        - name: KONG_ADMIN_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_ADMIN_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ADMIN_GUI_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_ADMIN_GUI_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ADMIN_LISTEN
          value: "0.0.0.0:8001, [::]:8001"
        - name: KONG_CLUSTER_LISTEN
          value: "off"
        - name: KONG_DATABASE
          value: "postgres"
        - name: KONG_LUA_PACKAGE_PATH
          value: "/opt/?.lua;/opt/?/init.lua;;"
        - name: KONG_NGINX_WORKER_PROCESSES
          value: "2"
        - name: KONG_PG_DATABASE
          value: "neutree"
        - name: KONG_PG_HOST
          value: "neutree-test-postgresql-service"
        - name: KONG_PG_PASSWORD
          value: "kong_admin_password"
        - name: KONG_PG_PORT
          value: "5432"
        - name: KONG_PG_SCHEMA
          value: "kong"
        - name: KONG_PG_USER
          value: "kong_admin"
        - name: KONG_PORTAL_API_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_PORTAL_API_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_PORT_MAPS
          value: "80:8000, 443:8443"
        - name: KONG_PREFIX
          value: "/kong_prefix/"
        - name: KONG_PROXY_ACCESS_LOG
          value: "/dev/stdout"
        - name: KONG_PROXY_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_PROXY_LISTEN
          value: "0.0.0.0:8000, [::]:8000, 0.0.0.0:8443 http2 ssl, [::]:8443 http2 ssl"
        - name: KONG_PROXY_STREAM_ACCESS_LOG
          value: "/dev/stdout basic"
        - name: KONG_PROXY_STREAM_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_ROUTER_FLAVOR
          value: "traditional"
        - name: KONG_STATUS_ACCESS_LOG
          value: "off"
        - name: KONG_STATUS_ERROR_LOG
          value: "/dev/stderr"
        - name: KONG_STATUS_LISTEN
          value: "0.0.0.0:8100, [::]:8100"
        - name: KONG_STREAM_LISTEN
          value: "off"
        args: [ "kong", "migrations", "bootstrap" ]
        volumeMounts:
        - name: kong-kong-prefix-dir
          mountPath: /kong_prefix/
        - name: kong-kong-tmp
          mountPath: /tmp
        resources:
          {}
      securityContext:
        seccompProfile:
          type: RuntimeDefault
      restartPolicy: OnFailure
      volumes:
      - name: kong-kong-prefix-dir
        emptyDir:
          sizeLimit: 256Mi
      - name: kong-kong-tmp
        emptyDir:
          sizeLimit: 1Gi
---
# Source: neutree/templates/migration-job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: neutree-test-migration-job-1
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  parallelism: 1
  completions: 1
  backoffLimit: 20
  template:
    metadata:
      labels:
        app.kubernetes.io/component: neutree-migration
    spec:
      imagePullSecrets:
        - name: my-registry-secret
      serviceAccountName: neutree-test-sa
      initContainers:
        - name: wait-postgresql
          image: myregistry.io/groundnuty/k8s-wait-for:v2.0
          imagePullPolicy: IfNotPresent
          args:
            - pod
            - -lapp.kubernetes.io/component=neutree-postgresql
        - name: wait-auth-service
          image: myregistry.io/groundnuty/k8s-wait-for:v2.0
          imagePullPolicy: IfNotPresent
          args:
            - pod
            - -lapp.kubernetes.io/component=neutree-auth
        - name: copy-migration-sql
          image: myregistry.io/neutree/neutree-db-scripts:v0.1.0
          imagePullPolicy: IfNotPresent
          command: ["/bin/sh", "-c"]
          args:
            - "cp -r /db/migrations/* /migrations/"
          volumeMounts:
            - name: migrations
              mountPath: /migrations
      containers:
      - name: migration
        image: myregistry.io/migrate/migrate:v4.18.3
        imagePullPolicy: IfNotPresent
        args:
          - -source=file://migrations
          - -database
          - "postgres://postgres:pgpassword@neutree-test-postgresql-service:5432/neutree?sslmode=disable"
          - up
        volumeMounts:
          - name: migrations
            mountPath: /migrations
            readOnly: true
      volumes:
        - name: migrations
          emptyDir: {}
      restartPolicy: OnFailure
---
# Source: neutree/templates/post-migration-hook-job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: neutree-test-post-migration-hook-job-1
  labels:
    helm.sh/chart: neutree-0.1.0
    app.kubernetes.io/name: neutree
    app.kubernetes.io/instance: neutree-test
    app.kubernetes.io/version: "v0.1.0"
    app.kubernetes.io/managed-by: Helm
spec:
  parallelism: 1
  completions: 1
  backoffLimit: 20
  template:
    metadata:
      labels:
        app.kubernetes.io/component: neutree-post-migration-hook-job
    spec:
      imagePullSecrets:
        - name: my-registry-secret
      serviceAccountName: neutree-test-sa
      initContainers:
        - name: wait-postgresql
          image: myregistry.io/groundnuty/k8s-wait-for:v2.0
          imagePullPolicy: IfNotPresent
          args:
            - pod
            - -lapp.kubernetes.io/component=neutree-postgresql
        - name: wait-migration-job
          image: myregistry.io/groundnuty/k8s-wait-for:v2.0
          imagePullPolicy: IfNotPresent
          args:
            - job
            - neutree-test-migration-job-1
            - -n
            - neutree-test
        - name: copy-seed-sql
          image: myregistry.io/neutree/neutree-db-scripts:v0.1.0
          imagePullPolicy: IfNotPresent
          command: ["/bin/sh", "-c"]
          args:
            - "cp -r /db/seed/* /seed/"
          volumeMounts:
            - name: seed
              mountPath: /seed
      containers:
      - name: post-migration-hook
        image: myregistry.io/postgres:13
        imagePullPolicy: IfNotPresent
        env:
          - name: PGOPTIONS
            value: "-c neutree.admin_password="
        command: ["bash", "-c"]
        args:
          - 'for file in $$(find /seed -name "*.sql" | sort); do echo "Executing seed file:" $$file; psql postgres://postgres:pgpassword@neutree-test-postgresql-service:5432/neutree?sslmode=disable -f $$file || exit 1; done'
        volumeMounts:
          - name: seed
            mountPath: /seed
      volumes:
        - name: seed
          emptyDir: {}
      restartPolicy: OnFailure
